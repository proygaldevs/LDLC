function moodboardInyect(){var a=window.location.href,o=/idM=([^&]+)/.exec(a)[1],e=o||0,t=document.getElementById("imgMoodboard"),s=document.getElementById("download"),r=document.getElementById("download2");0==e?(t.src=urlbaseForMoodboards+"/moodboards/1464416155178.png",s.href=urlbaseForMoodboards+"/moodboards/1464416155178.png",r.href=urlbaseForMoodboards+"/moodboards/1464416155178.png",idmoodboard="1464416155178"):(t.src=urlbaseForMoodboards+"/moodboards/"+e+".png",s.href=urlbaseForMoodboards+"/moodboards/"+e+".png",r.href=urlbaseForMoodboards+"/moodboards/"+e+".png",idmoodboard=e)}function continuarBeforeMoodboard(){if(""==idmoodboard){urlbase,urlbaseForMoodboards;""==getCookie("userAssistant")?(checklogintosave=1,$("#login-modal").modal("show")):saveAndInitProject()}}function continuarAfterMoodboard(){$(document.body).css({cursor:"wait"}),id_decorador_seleccionado=getCookie("id_decorador_seleccionado");var a=getCookie("paso5");if(0==idmoodboard)saveImageServerCanvas(0);else{getCookie("paso1"),getCookie("paso2"),getCookie("paso3"),getCookie("paso4");if("creatuinspiracion.html"==cosas[cosas.length-1]&&""==a)return setCookie("idmoodboardcreatuinspiracion",idmoodboard,365),setCookie("nuevo_Proyecto","1",365),alaAppDentro(),window.location=href,!1;urlbase,urlbaseForMoodboards;""==getCookie("userAssistant")?(checklogintosave=1,$("#login-modal").modal("show")):saveAndInitProject()}setTimeout(function(){$(document.body).css({cursor:"default"})},1e3)}function compartirFacebookv(a){var o=a,e=urlbase+"/inspiracion.html?idM="+o,t=urlbaseForMoodboards+"/moodboards/"+o+".png";FB.ui({method:"feed",link:e,picture:t,caption:"Has creado tu tablero de inspiración"},function(a){})}function compartirTwitterV(a){var o=a,e=urlbase+"/inspiracion.html?idM="+o;urlbaseForMoodboards;return window.open("https://twitter.com/share?url="+e+"&text="+document.title),!1}function compartirpinterestV(a){var o=a,e=urlbase+"/inspiracion.html?idM="+o,t=urlbaseForMoodboards+"/moodboards/"+o+".png";PinUtils.pinOne({url:e,media:t,description:"Mi tablero de inspiración"})}function compartirFacebook(){if(0==idmoodboard)saveImageServerCanvas(1);else{var a=urlbase+"/inspiracion.html?idM="+idmoodboard,o=urlbaseForMoodboards+"/moodboards/"+idmoodboard+".png";FB.ui({method:"feed",link:a,picture:o,caption:"Has creado tu tablero de inspiración"},function(a){})}}function compartirTwitter(){if(0!=idmoodboard){var a=urlbase+"/inspiracion.html?idM="+idmoodboard;urlbaseForMoodboards;return window.open("https://twitter.com/share?url="+a+"&text="+document.title),!1}saveImageServerCanvas(2)}function compartirPinterest(){if(0==idmoodboard)saveImageServerCanvas(3);else{var a=urlbase+"/inspiracion.html?idM="+idmoodboard,o=urlbaseForMoodboards+"/moodboards/"+idmoodboard+".png";PinUtils.pinOne({url:a,media:o,description:"Mi tablero de inspiración"})}}function saveImageServerCanvas(a){$("body").css("cursor","progress");getCookie("paso1"),getCookie("paso2"),getCookie("paso3"),getCookie("paso4"),getCookie("paso5");var o=document.getElementById("canvasformodboard").toDataURL("image/png");new XMLHttpRequest;try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/upload"}),$.ajax({type:"POST",url:urlbaseForAjax+"/UploadServlet2",data:o,contentType:"application/upload",success:function(o){var e=o.replace(".png","");return idmoodboard=e,setCookie("id_moodboard",e,365),$("body").css("cursor","default"),0==a?(continuarAfterMoodboard(),!1):1==a?(continuarBeforeMoodboard(),!1):1==a?(compartirFacebook(),!1):2==a?(compartirTwitter(),!1):3==a?(compartirPinterest(),!1):void(null!=document.getElementById("imgMoodboard")&&($("#imgMoodboard").css("display","block"),document.getElementById("imgMoodboard").src=urlbaseForMoodboards+"/moodboards/"+idmoodboard+".png",$("#imgMoodboard").css("border","1px solid black"),document.getElementById("download").href=urlbaseForMoodboards+"/moodboards/"+idmoodboard+".png",document.getElementById("download2").href=urlbaseForMoodboards+"/moodboards/"+idmoodboard+".png"))},error:function(a,o){cerrarCargando()},complete:function(a,o){cerrarCargando()}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),cerrarCargando()}}function crearMoodboardCTM(){setCookie("paso6_1_CTM",listOfImagenesCTM[0],365),setCookie("paso6_2_CTM",listOfImagenesCTM[1],365),setCookie("paso6_3_CTM",listOfImagenesCTM[2],365);var a=$("#color1_CTM").data("colorpicker").color.toHex(),o=$("#color2_CTM").data("colorpicker").color.toHex(),e=$("#color3_CTM").data("colorpicker").color.toHex();setCookie("paso7_1_CTM",a,365),setCookie("paso7_2_CTM",o,365),setCookie("paso7_3_CTM",e,365),setCookie("paso8_1_CTM",listOfSensacionesCTM[0],365),setCookie("paso8_2_CTM",listOfSensacionesCTM[1],365),listOfFrasesCTM.length>0&&setCookie("paso8_3_CTM",listOfFrasesCTM[0],365),modboardConstructCTM()}function grabarFrase(){if($("#cargando").modal("show"),3==listOfImagenesCTM.length&&2==listOfSensacionesCTM.length)if(1==listOfFrasesCTM.length)crearMoodboardCTM();else{var a="UploadServletFrase?user=temporal&proyecto="+currentdate+"&seccion=frase",o=document.getElementById("memecanvas").toDataURL("image/png");new XMLHttpRequest;try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/upload"}),$.ajax({type:"POST",url:urlbaseForAjax+"/"+a,data:o,contentType:"application/upload",success:function(a){setCookie("paso8_3_CTM",a,365),crearMoodboardCTM()}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}else BootstrapDialog.alert("Faltan imágenes, han de ser 3 o faltan sensaciones, han de ser 2")}function downloadCanvas(a,o,e){a.href=document.getElementById(o).toDataURL(),a.download=e}function checkRadioButtons(){for(var a="",o=document.getElementsByName("emotion"),e=0;e<o.length;e++)if(o[e].checked){a=o[e].value;break}cerramosONo=!0,setCookie("paso1Real",a,365),"vestidor"==a?(setCookie("paso1","salon",365),setCookie("paso1original","vestidor",365)):"questionmark"==a?(setCookie("paso1","salon",365),setCookie("paso1original","otros",365)):(setCookie("paso1",a,365),setCookie("paso1original",a,365)),document.getElementById("botonSiguiente").className=document.getElementById("botonSiguiente").className.replace(/(?:^|\s)disabled(?!\S)/g,""),document.getElementById("botonSiguiente2").className=document.getElementById("botonSiguiente2").className.replace(/(?:^|\s)disabled(?!\S)/g,""),setcolorPre(),setminimalismoPre(),setEstiloPre(),clickSiguientePaso1(),$("#myCarousel").carousel("next")}function checkRadioButtonsPaso2(){if(0==anteriorclickado)anteriorclickado=!0;else{anteriorclickado=!1;for(var a="",o=document.getElementsByName("radiostyles"),e=0;e<o.length;e++)if(o[e].checked){a=o[e].value;break}setCookie("paso2",a,365),document.getElementById("botonSiguientePaso2").className=document.getElementById("botonSiguientePaso2").className.replace(/(?:^|\s)disabled(?!\S)/g,""),document.getElementById("botonSiguientePaso22").className=document.getElementById("botonSiguientePaso22").className.replace(/(?:^|\s)disabled(?!\S)/g,""),clickSiguientePaso2(),$("#myCarousel").carousel("next")}}function checkRadioButtonsPaso3(){if(0==anteriorclickado)anteriorclickado=!0;else{anteriorclickado=!1;for(var a="",o=document.getElementsByName("radiominimalismo"),e=0;e<o.length;e++)if(o[e].checked){a=o[e].value;break}setCookie("paso3",a,365),document.getElementById("botonSiguientePaso3").className=document.getElementById("botonSiguientePaso3").className.replace(/(?:^|\s)disabled(?!\S)/g,""),document.getElementById("botonSiguientePaso32").className=document.getElementById("botonSiguientePaso32").className.replace(/(?:^|\s)disabled(?!\S)/g,""),clickSiguientePaso3(),$("#myCarousel").carousel("next")}}function checkRadioButtonsPaso4(){if(0==anteriorclickado)anteriorclickado=!0;else{anteriorclickado=!1;for(var a="",o=document.getElementsByName("radiocolores"),e=0;e<o.length;e++)if(o[e].checked){a=o[e].value;break}setCookie("paso4",a,365),document.getElementById("botonSiguientePaso4").className=document.getElementById("botonSiguientePaso4").className.replace(/(?:^|\s)disabled(?!\S)/g,""),document.getElementById("botonSiguientePaso42").className=document.getElementById("botonSiguientePaso42").className.replace(/(?:^|\s)disabled(?!\S)/g,""),clickSiguientePaso4(),$("#myCarousel").carousel("next")}}function checkRadioButtonsPaso5(){if(0==anteriorclickado)anteriorclickado=!0;else{anteriorclickado=!1;for(var a="",o=document.getElementsByName("radiotiendas"),e=new Array,t=0;t<o.length;t++)o[t].checked&&(a=o[t].value,e.push(a));var s=JSON.stringify(e);setCookie("paso5",s,365),document.getElementById("botonSiguientePaso5").className=document.getElementById("botonSiguientePaso5").className.replace(/(?:^|\s)disabled(?!\S)/g,""),document.getElementById("botonSiguientePaso52").className=document.getElementById("botonSiguientePaso52").className.replace(/(?:^|\s)disabled(?!\S)/g,""),e.length>=3&&clickSiguientePaso5()}}function checkRadioButtonsPaso6(){if(0==anteriorclickado)anteriorclickado=!0;else{anteriorclickado=!1;for(var a="",o=document.getElementsByName("radioimagenes"),e=new Array,t=0;t<o.length;t++)o[t].checked&&(a=o[t].value,e.push(a));3==e.length?(setCookie("paso6_1",e[0],365),setCookie("paso6_2",e[1],365),setCookie("paso6_3",e[2],365),document.getElementById("botonSiguientePaso6").className=document.getElementById("botonSiguientePaso6").className.replace(/(?:^|\s)disabled(?!\S)/g,""),clickSiguientePaso6(),$("#myCarousel").carousel("next")):(e.length>3&&BootstrapDialog.alert("Ha seleccionado "+e.length+", por favor escoa solo 3"),document.getElementById("botonSiguientePaso6").className=document.getElementById("botonSiguientePaso6").className.replace(/(?:^|\s)separacionIzq_5(?!\S)/g," separacionIzq_5 disabled "))}}function checkRadioButtonsPaso7(){if(0==anteriorclickado)anteriorclickado=!0;else{anteriorclickado=!1;for(var a="",o=document.getElementsByName("radioColorMod"),e=new Array,t=0;t<o.length;t++)o[t].checked&&(a=o[t].value,e.push(a));3==e.length?(setCookie("paso7_1",e[0],365),setCookie("paso7_2",e[1],365),setCookie("paso7_3",e[2],365),document.getElementById("botonSiguientePaso7").className=document.getElementById("botonSiguientePaso7").className.replace(/(?:^|\s)disabled(?!\S)/g,""),clickSiguientePaso7(),$("#myCarousel").carousel("next")):(e.length>3&&BootstrapDialog.alert("Ha seleccionado "+e.length+", por favor escoja solo 3"),document.getElementById("botonSiguientePaso7").className=document.getElementById("botonSiguientePaso7").className.replace(/(?:^|\s)separacionIzq_5(?!\S)/g," separacionIzq_5 disabled "))}}function checkRadioButtonsPaso8a(){if(0==anteriorclickado)anteriorclickado=!0;else{anteriorclickado=!1;for(var a="",o=document.getElementsByName("radioSensacionesMod"),e=new Array,t=0;t<o.length;t++)o[t].checked&&(a=o[t].value,e.push(a));2==e.length?(setCookie("paso8_1",e[0],365),setCookie("paso8_2",e[1],365),document.getElementById("botonSiguientePaso8a").className=document.getElementById("botonSiguientePaso8a").className.replace(/(?:^|\s)disabled(?!\S)/g,""),clickSiguientePaso8a(),$("#myCarousel").carousel("next")):(e.length>2&&BootstrapDialog.alert("Ha seleccionado "+e.length+", por favor escojA solo 2"),document.getElementById("botonSiguientePaso8a").className=document.getElementById("botonSiguientePaso8a").className.replace(/(?:^|\s)separacionIzq_5(?!\S)/g," separacionIzq_5 disabled "))}}function checkRadioButtonsPaso8b(){if(0==anteriorclickado)anteriorclickado=!0;else{anteriorclickado=!1;for(var a="",o=document.getElementsByName("radioSensacionesModb"),e=new Array,t=0;t<o.length;t++)o[t].checked&&(a=o[t].value,e.push(a));1==e.length?(setCookie("paso8_3",e[0],365),document.getElementById("botonSiguientePaso8b").className=document.getElementById("botonSiguientePaso8b").className.replace(/(?:^|\s)disabled(?!\S)/g,""),clickSiguientePaso8b(),$("#myCarousel").carousel("next"),$("#cargando").modal("show")):(e.length>1&&BootstrapDialog.alert("Ha seleccionado "+e.length+", por favor escoja solo 1"),document.getElementById("botonSiguientePaso8b").className=document.getElementById("botonSiguientePaso8b").className.replace(/(?:^|\s)separacionIzq_5(?!\S)/g," separacionIzq_5 disabled "))}}function checkCookie(){var a=getCookie("userAssistant"),o=getCookie("passAssistant");""!=a?($(document.body).css({cursor:"wait"}),login(a,o)):(cerrarCargando(),setTimeout(function(){$(document.body).css({cursor:"default"})},1500))}function checkCookiepasoCTM(){var a=getCookie("userAssistant"),o=getCookie("passAssistant");(canvasctm=createHiDPICanvas(300,300)).id="memecanvas",$("#memecanvasdiv").html(canvasctm),(canvasctm=document.getElementById("memecanvas")).style.backgroundColor="white",ctxForCTM=canvasctm.getContext("2d"),""!=a?loginForCTM(a,o):cargarDropzonePlanos(!0),pintarCanvasCTM()}function clearCanvasCTM(){ctxForCTM.clearRect(0,0,canvasctm.width,canvasctm.height)}function pintarCanvasCTM(){clearCanvasCTM();for(var a=1;a<=3;a++){var o="izq"+a+"_CTM",e=document.getElementById(o);o="texto_frase"+a+"_CTM";var t=document.getElementById(o);o="der"+a+"_CTM";var s=document.getElementById(o);o="rotacion"+a;var r=document.getElementById(o);o="tamano_letra"+a;var n=document.getElementById(o);o="#color_contorno"+a;var i=$(o).data("colorpicker").color.toHex();o="#color_relleno"+a;var c=$(o).data("colorpicker").color.toHex();o="letras_tipos"+a;var l=document.getElementById(o);o="letras_uniones"+a;var d=document.getElementById(o);o="color_contorno_boolean"+a;var p=document.getElementById(o);escribirEnCanvasCTM(e.value,s.value,t.value,n.value,l.value,i,c,"center",d.value,r.value,p.checked)}cerrarCargando()}function testEscribir(){escribirEnCanvasCTM(10,10,"PALOMA",40,"Arial","white","center","round",0),escribirEnCanvasCTM(0,50,"hola",20,"biloxi_scriptregular","black","white","center","round",0)}function escribirEnCanvasCTM(a,o,e,t,s,r,n,i,c,l,d){ctxForCTM.lineWidth=5,ctxForCTM.font=t+"pt "+s,ctxForCTM.strokeStyle=r,ctxForCTM.fillStyle=n,ctxForCTM.textAlign=i,ctxForCTM.lineJoin=c;var p=e;x=150-ratioforcanvasCTM*a,y=300-ratioforcanvasCTM*o,ctxForCTM.save(),ctxForCTM.beginPath(),ctxForCTM.rotate(Math.PI/180*l),d&&ctxForCTM.strokeText(p,x,y),ctxForCTM.fillText(p,x,y),ctxForCTM.restore()}function checkCookiepaso1(){var a=getCookie("userAssistant"),o=getCookie("passAssistant");if(""!=a)loginForPAso1(a,o);else{var e=urlbase;window.location=e}}function checkCookiepaso2(){var a=getCookie("userAssistant"),o=getCookie("passAssistant");if(""!=a)loginForPAso2(a,o);else{var e=urlbase;window.location=e}}function checkCookiepaso3(){var a=getCookie("userAssistant"),o=getCookie("passAssistant");if(""!=a)loginForPAso3(a,o);else{var e=urlbase;window.location=e}}function checkCookiepaso4(){var a=getCookie("userAssistant"),o=getCookie("passAssistant");if(""!=a)loginForPAso4(a,o);else{var e=urlbase;window.location=e}}function vamosAlCustomMoodboard(){var a=urlbase+"/creatuinspiracion.html";window.location=a}function cargarEnOnLoadBodyForIndex(){}function cargarRegalo(){""!=getCookie("userAssistant")&&$(window).width()>767&&($(".bit-wrapper").toggleClass("open"),$("#ulforsustitution").toggleClass("notdisplay"),$(".navbar-collapse").toggleClass("invisibility"),$(".navbar-fixed-top").toggleClass("fondovisible"),$(".navbar-fixed-top").toggleClass("bordeInferior"));var a,o=new Image;o.onload=function(){document.getElementById("sidebarmenubtnmoodboardimage").src=o.src,a=setInterval(function(){clearInterval(a),$(".sidebarmenubtnmoodboard").animate({right:"0px"},500)},1)},cosas.length<3?o.src="../img/other/boton-CREA-PROYECTO.png":o.src=urlbase+"/img/other/boton-CREA-PROYECTO.png"}function cargarBotonCrearProyecto(){var a,o=new Image;o.onload=function(){document.getElementById("sidebarmenubtnmoodboardimage").src=o.src,a=setInterval(function(){clearInterval(a),$(".sidebarmenubtnmoodboard").animate({right:"0px"},500)},1)},cosas.length<3?o.src="../img/other/boton-CREA-PROYECTO.png":o.src=urlbase+"/img/other/boton-CREA-PROYECTO.png"}function cargarEnOnLoadBody(){var a=QueryString.id;setCookie("id_decorador_seleccionado",a,365);$(":radio").prop("checked",!1),deleteCookie("aplicacion_paso_1"),deleteCookie("aplicacion_paso_2"),deleteCookie("aplicacion_paso_3"),deleteCookie("aplicacion_paso_4");var o=getCookie("checked_keep_Session"),e=getCookie("nuevo_Proyecto");"1"!=o&&""==e&&(deleteCookie("userAssistant"),deleteCookie("passAssistant")),checkCookie(),clearPrefCookies(),$("#myCarousel").swiperight(function(){1!=pageIndex&&(clearInterval(cronometro),$(this).carousel("prev"),pageIndex-=1)}),$("#myCarousel").swipeleft(function(){var a="paso"+pageIndex;""!=getCookie(a)&&($(this).carousel("next"),pageIndex+=1)});var t=document.getElementById("download");null!=t&&document.getElementById("download").addEventListener("click",function(){downloadCanvas(this,"canvasformodboard","decoTheco_moodboard.png")},!1),null!=(t=document.getElementById("download2"))&&document.getElementById("download2").addEventListener("click",function(){downloadCanvas(this,"canvasformodboard","decoTheco_moodboard.png")},!1)}function cargarEnOnLoadBodyCTM(){deleteCookie("aplicacion_paso_1"),deleteCookie("aplicacion_paso_2"),deleteCookie("aplicacion_paso_3"),deleteCookie("aplicacion_paso_4"),setCookie("aplicacion_CTM",1,365),checkCookiepasoCTM();var a=document.getElementById("download");null!=a&&document.getElementById("download").addEventListener("click",function(){downloadCanvas(this,"canvasformodboard","decoTheco_moodboard.png")},!1),null!=(a=document.getElementById("download2"))&&document.getElementById("download2").addEventListener("click",function(){downloadCanvas(this,"canvasformodboard","decoTheco_moodboard.png")},!1)}function cargarEnOnLoadBodyPaso1(){deleteCookie("aplicacion_paso_2"),deleteCookie("aplicacion_paso_3"),deleteCookie("aplicacion_paso_4"),setCookie("aplicacion_paso_1",1,365),checkCookiepaso1()}function cargarEnOnLoadBodyPaso2(){deleteCookie("aplicacion_paso_1"),deleteCookie("aplicacion_paso_3"),deleteCookie("aplicacion_paso_4"),setCookie("aplicacion_paso_2",1,365),checkCookiepaso2()}function cargarEnOnLoadBodyPaso3(){deleteCookie("aplicacion_paso_1"),deleteCookie("aplicacion_paso_2"),deleteCookie("aplicacion_paso_4"),setCookie("aplicacion_paso_3",1,365),checkCookiepaso3()}function cargarEnOnLoadBodyPaso4(){deleteCookie("aplicacion_paso_1"),deleteCookie("aplicacion_paso_3"),deleteCookie("aplicacion_paso_2"),setCookie("aplicacion_paso_4",1,365),checkCookiepaso4()}function clearPrefCookies(){deleteCookie("paso1"),deleteCookie("paso2"),deleteCookie("paso3"),deleteCookie("paso4"),deleteCookie("paso5"),deleteCookie("paso6_1"),deleteCookie("paso6_2"),deleteCookie("paso6_3"),deleteCookie("paso7_1"),deleteCookie("paso7_2"),deleteCookie("paso7_3"),deleteCookie("paso8_1"),deleteCookie("paso8_2"),deleteCookie("paso8_3"),deleteCookie("id_moodboard"),deleteCookie("id_proyectoglobal")}function recordar(a){function o(a,o){a.fadeOut(t,function(){$(this).text(o).fadeIn(t)})}function e(a,e,t,r,n,i){var c=a.text();o(t,i),a.addClass(r),e.removeClass("glyphicon-chevron-right"),e.addClass(n+" "+r),setTimeout(function(){o(t,c),a.removeClass(r),e.addClass("glyphicon-chevron-right"),e.removeClass(n+" "+r)},s)}$("#login-form"),$("#lost-form"),$("#register-form"),$("#div-forms");var t=150,s=2e3;try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/RememberPass",data:{mail:a},contentType:"application/json; charset=utf-8",success:function(a){1==a?e($("#div-lost-msg"),$("#icon-lost-msg"),$("#text-lost-msg"),"success","glyphicon-ok","Enviada!"):e($("#div-lost-msg"),$("#icon-lost-msg"),$("#text-lost-msg"),"error","glyphicon-remove","El mail no está registrado")}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}function loginForCTM(a,o){function e(a,o){a.fadeOut(n,function(){$(this).text(o).fadeIn(n)})}function t(a,o,t,s,r,n){var c=a.text();e(t,n),a.addClass(s),o.removeClass("glyphicon-chevron-right"),o.addClass(r+" "+s),setTimeout(function(){e(t,c),a.removeClass(s),o.addClass("glyphicon-chevron-right"),o.removeClass(r+" "+s)},i)}var s=a,r=o,n=($("#login-form"),$("#lost-form"),$("#register-form"),$("#div-forms"),150),i=2e3,c=getCookie("id_proyectoglobal");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/GetUser",data:{mail:s,pass:r},contentType:"application/json; charset=utf-8",success:function(a){var o=a.id,e=a.mail,s=a.userName;if(proyectos_ajax=a.proyectos,o<0)t($("#div-login-msg"),$("#icon-login-msg"),$("#text-login-msg"),"error","glyphicon-remove","Algun dato es incorrecto"),clearAllCookies();else{t($("#div-login-msg"),$("#icon-login-msg"),$("#text-login-msg"),"success","glyphicon-ok","Datos Correctos");var n="";n+='<li id="liforsustitution" class="dropdown ">',n+='<a href="#" class="dropdown-toggle  colornegro letraAriallogin  interspaciado_2" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i style="margin-right:5px;" class="fa fa-user" aria-hidden="true"></i>'+s+'<span class="caret"></span></a>',n+='<ul class="dropdown-menu">',n+='<li class="dropdown-header" style="cursor:pointer;padding-top:8px" onclick="aHomeUsuarios()">Lista de proyectos</li>',cargarProjectoCTM(c);var i=urlbase;n+='<li role="separator" class="divider"></li>',n+='<li><a class=" colornegro letraAriallogin  interspaciado_2" href="'+i+'/decoracion-online.html" onclick="nuevoProyecto()">Iniciar nuevo proyecto</a></li>',n+=' <li role="separator" class="divider"></li>',n+='<li><a class=" colornegro letraAriallogin  interspaciado_2" href="'+i+'" onclick="logoutFunction()">Cerrar sesión</a></li>',n+="</ul>",n+=" </li>",$("#liforsustitution").remove(),$("#ulforsustitution").append(n),document.getElementById("check_login_recuerdame").checked&&setCookie("checked_keep_Session","1",365),setCookie("userAssistant",e,365),setCookie("passAssistant",r,365),1==checklogintosave&&(saveAndInitProject(),checklogintosave=0),setTimeout(function(){$("#login-modal").modal("hide")},1500)}},error:function(a,o){cerrarCargando()},complete:function(a,o){cerrarCargando()}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),cerrarCargando()}}function loginForPAso1(a,o){function e(a,o){a.fadeOut(n,function(){$(this).text(o).fadeIn(n)})}function t(a,o,t,s,r,n){var c=a.text();e(t,n),a.addClass(s),o.removeClass("glyphicon-chevron-right"),o.addClass(r+" "+s),setTimeout(function(){e(t,c),a.removeClass(s),o.addClass("glyphicon-chevron-right"),o.removeClass(r+" "+s)},i)}var s=a,r=o,n=($("#login-form"),$("#lost-form"),$("#register-form"),$("#div-forms"),150),i=2e3,c=getCookie("id_proyectoglobal");try{$.ajax({dataType:"json",url:urlbaseForAjax+"/GetUser",data:{mail:s,pass:r,detail_level:1,id_proyecto:c},contentType:"application/json; charset=utf-8",success:function(a){var o=a.id,e=(a.mail,a.userName);if(proyectos_ajax=a.proyectos,console.log(a),o<0)t($("#div-login-msg"),$("#icon-login-msg"),$("#text-login-msg"),"error","glyphicon-remove","Algun dato es incorrecto"),clearAllCookies();else{t($("#div-login-msg"),$("#icon-login-msg"),$("#text-login-msg"),"success","glyphicon-ok","Datos Correctos");var s="";s+='<li id="liforsustitution" class="dropdown ">',s+='<a href="#" class="dropdown-toggle  colornegro letraAriallogin  interspaciado_2" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i style="margin-right:5px;" class="fa fa-user" aria-hidden="true"></i>'+e+'<span class="caret"></span></a>',s+='<ul class="dropdown-menu">',proyectos_ajax.length<=1?s+='<li class="dropdown-header" style="color:grey;padding-top:8px" onclick="">Lista de proyectos</li>':s+='<li class="dropdown-header colornegro " style="cursor:pointer;padding-top:8px" onclick="aHomeUsuarios()">Lista de proyectos</li>';for(var r=0;r<proyectos_ajax.length;r++)c==proyectos_ajax[r].id&&(proyectoObject=proyectos_ajax[r]);cargarProjectoPaso1(c);var n=urlbase;s+='<li role="separator" class="divider"></li>',s+='<li><a class=" colornegro letraAriallogin  interspaciado_2" href="'+n+'/decoracion-online.html" onclick="nuevoProyecto()">Iniciar nuevo proyecto</a></li>',s+=' <li role="separator" class="divider"></li>',s+='<li><a class=" colornegro letraAriallogin  interspaciado_2" href="'+n+'" onclick="logoutFunction()">Cerrar sesión</a></li>',s+="</ul>",s+=" </li>",$("#liforsustitution").remove(),$("#ulforsustitution").append(s),1==checklogintosave&&(saveAndInitProject(),checklogintosave=0),setTimeout(function(){$("#login-modal").modal("hide")},1500)}goChat(e,c,150)},error:function(a,o){cerrarCargando()}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),cerrarCargando()}}function loginForPAso2(a,o){function e(a,o){a.fadeOut(n,function(){$(this).text(o).fadeIn(n)})}function t(a,o,t,s,r,n){var c=a.text();e(t,n),a.addClass(s),o.removeClass("glyphicon-chevron-right"),o.addClass(r+" "+s),setTimeout(function(){e(t,c),a.removeClass(s),o.addClass("glyphicon-chevron-right"),o.removeClass(r+" "+s)},i)}var s=a,r=o,n=($("#login-form"),$("#lost-form"),$("#register-form"),$("#div-forms"),150),i=2e3,c=getCookie("id_proyectoglobal");try{$.ajax({dataType:"json",url:urlbaseForAjax+"/GetUser",data:{mail:s,pass:r,detail_level:2,id_proyecto:c},contentType:"application/json; charset=utf-8",success:function(a){var o=a.id,e=(a.mail,a.userName);if(proyectos_ajax=a.proyectos,o<0)t($("#div-login-msg"),$("#icon-login-msg"),$("#text-login-msg"),"error","glyphicon-remove","Algun dato es incorrecto"),clearAllCookies();else{t($("#div-login-msg"),$("#icon-login-msg"),$("#text-login-msg"),"success","glyphicon-ok","Datos Correctos");var s="";s+='<li id="liforsustitution" class="dropdown ">',s+='<a href="#" class="dropdown-toggle  colornegro letraAriallogin  interspaciado_2" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i style="margin-right:5px;" class="fa fa-user" aria-hidden="true"></i>'+e+'<span class="caret"></span></a>',s+='<ul class="dropdown-menu">',proyectos_ajax.length<=1?s+='<li class="dropdown-header" style="color:grey;padding-top:8px" onclick="">Lista de proyectos</li>':s+='<li class="dropdown-header colornegro " style="cursor:pointer;padding-top:8px" onclick="aHomeUsuarios()">Lista de proyectos</li>';for(var r=0;r<proyectos_ajax.length;r++)c==proyectos_ajax[r].id&&(proyectoObject=proyectos_ajax[r]);var n=urlbase;s+='<li role="separator" class="divider"></li>',s+='<li><a class=" colornegro letraAriallogin  interspaciado_2" href="'+n+'/decoracion-online.html" onclick="nuevoProyecto()">Iniciar nuevo proyecto</a></li>',s+=' <li role="separator" class="divider"></li>',s+='<li><a class=" colornegro letraAriallogin  interspaciado_2" href="'+n+'" onclick="logoutFunction()">Cerrar sesión</a></li>',s+="</ul>",s+=" </li>",$("#liforsustitution").remove(),$("#ulforsustitution").append(s),1==checklogintosave&&(saveAndInitProject(),checklogintosave=0),setTimeout(function(){$("#login-modal").modal("hide")},1500),cargarProjectoPaso2(c)}goChat(e,c,150)},error:function(a,o){cerrarCargando()}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),cerrarCargando()}}function lanzarportfolioindividual(a,o,e,t,s){setCookie("proyectoParaDecorador",s,365);e.split("/");for(var r=t.split(" "),n=r[0],i=1;i<r.length;i++)n=n+"_"+r[i];localStorage.removeItem("id_decorador"),localStorage.setItem("id_decorador",JSON.stringify(a)),localStorage.removeItem("posicion_portfolio"),localStorage.setItem("posicion_portfolio",JSON.stringify(o));var c=urlbase+"/decorador-online.html?decorador="+n+"&id="+a;window.open(c,"_blank")}function getRRSS(a){if(""!=a&&null!=a)return a.split("RRSS_rrss")}function colocarItemsDecoradoresDentroHome(a,o,e){data=a,id_proyecto=o;for(var t=[],s=[],r=0;r<c;r++){var n=new Image;n[r].src=" "+data[r].imagenCara+" ",n[r].onload=function(){s[r]=this.width,t[r]=this.height}}var i="",c=5;data.length<5&&(c=data.length);for(var l=0;l<c;l++){i+='<div id="itemchoosedecorator1" style="border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: black; background-color: white; padding-bottom:4%; padding-top:4%; height:auto" class="row-eq-height col-xs-12" >',0==l&&(i+='<a   style="position: absolute;right: 3px; top: 0px; color: black; cursor: pointer;" data-dismiss="modal"\t> ',i+='<i class="fa fa-times" aria-hidden="true"></i>',i+="</a> "),t[l]<=s[l]?(i=(i+='<div id="foto" class="col-xs-3" style="padding-left:0;margin-left:15px;width:90px;height:90px;overflow:hidden;border-radius: 50%; border-style: solid; border-color: white; border-width: medium;text-align:center">')+'<img alt="cara" style="width:100%;height:auto;" src="'+data[l].imagenCara+'">',i+='</div><div id="componentes" class="col-xs-9 col-xs-8" style="padding-right: 0px"><div id="nombre_choose" class="col-xs-12  letra-xs letra-mayusculas letra-negrita">'):(i=(i+='<div id="foto" class="col-xs-3" style="padding-left:0;margin-left:15px;width:90px;height:90px;overflow:hidden;border-radius: 50%; border-style: solid; border-color: white; border-width: medium;text-align:center">')+'<img alt="cara" style="width:auto;height:100%; " src="'+data[l].imagenCara+'">',i+='</div><div id="componentes" class="col-sm-9 col-xs-8" style="padding-right: 0px"><div id="nombre_choose" class="col-xs-12  letra-xs letra-mayusculas letra-negrita">'),i=i+'<div class="col-xs-12" style="display:table; height: 100%; text-align: left;"><span style=" display: table-cell; vertical-align: middle;">'+data[l].tipo+"</span></div>",i+='</div><div id="rrss_choose" class="col-xs-12 letra-xs letra-mayusculas letra-negrita" style="text-align: left;"><div id="rrss_encuadre" class="col-xs-12 letra-xs letra-mayusculas letra-negrita" style="text-align: left;">';var d=getRRSS(data[l].rrss);if(""==d||null==d);else for(var p=0;p<d.length;p++)d[p].length>0&&(i+='<a  href="'+d[p]+'" style="cursor: pointer; margin-left: 1px;margin-right: 1px;"\ttarget="_blank"> ',0==p?i+='<i class="fa fa-facebook facebook-icon" aria-hidden="true"> </i>':1==p?i+='<i class="fa fa-instagram facebook-icon" aria-hidden="true"> </i>':2==p?i+='<i\tclass="fa fa-twitter facebook-icon"> </i>':3==p?i+='<i\tclass="fa fa-pinterest facebook-icon"> </i>':4==p?i+='<i class="fa fa-behance-square facebook-icon" aria-hidden="true"></i>':5==p&&(i+='<i class="fa fa-linkedin-square facebook-icon" aria-hidden="true"></i>'),i+="</a> ");null!=data[l].blog&&data[l].blog.length>0&&(i+='<a  href="'+data[l].blog+'" style="cursor: pointer; margin-left: 1px;margin-right: 1px;"\ttarget="_blank"> <i class="fa fa-wordpress" aria-hidden="true"></i></a>'),i+='</div></div><div class="col-xs-12">',i+='<div id="conocememas" style="z-index: 1; text-align: center; padding-right: .5vw;" class="col-sm-6 col-xs-12 letra-xxs letra-mayusculas letra-negrita"><a class="buttonstandard  " onclick="lanzarportfolioindividual('+data[l].id+","+l+",'"+data[l].imagenPrincipal+"','"+data[l].tipo+"','"+id_proyecto+"')\">conóceme más</a></div>",i+='<div id="contratar" style="z-index: 1; text-align: center; padding-right: .5vw;" class="col-sm-6 col-xs-12 letra-xxs letra-mayusculas letra-negrita"><a class="buttonstandard_invertido  " onclick="seleccionarDecoradorHome('+data[l].id+","+id_proyecto+","+e+')" >contratar</a></div>',i+="</div></div></div></div>"}i+='<div id="todos-diseñadores" style="z-index: 1; text-align: center; padding:0px!important;" class="col-xs-12 letra-s letra-mayusculas "><a class="buttonstandard  " style="border:0;border-top:1px solid black;" onclick="elegirDecorador('+id_proyecto+')" href="#">todos los diseñadores</a></div>',$("#divforescogerdecoradordentro").html(i)}function elegirDecorador(a){setCookie("proyectoParaDecorador",a,365);var o=urlbase+"/decoradores-online.html";window.location=o}function colocarItemsDecoradoresDentroSeleccionar(a){data=a;var o="",e=5;data.length<5&&(e=data.length);for(var t=0;t<e;t++){o+='<div id="itemchoosedecorator1" style="border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: black; background-color: white; padding-bottom:4%; padding-top:4%; " class="row-eq-height " >',0==t&&(o+='<a   style="position: absolute;right: 3px; top: 0px; color: black; cursor: pointer;" data-dismiss="modal"\t> ',o+='<i class="fa fa-times" aria-hidden="true"></i>',o+="</a> "),o=(o+='<div id="foto" class="col-xs-3" style="">')+'<img alt="cara" style="padding: 5%; min-width: 75px; width:90%; border-radius: 50%; border-style: solid; border-color: white; border-width: medium;" src="'+data[t].imagenCara+'">',o=(o+='</div><div id="componentes" class="col-xs-9 col-bordered" style="padding-right: 0px"><div id="nombre_choose" class="col-xs-12  letra-xs letra-mayusculas letra-negrita">')+'<div class="col-xs-12" style="display:table; height: 100%; text-align: left;"><span style=" display: table-cell; vertical-align: middle;">'+data[t].tipo+"</span></div>",o+='</div><div id="rrss_choose" class="col-xs-12 letra-xs letra-mayusculas letra-negrita" style="text-align: left;"><div id="rrss_encuadre" class="col-xs-12 letra-xs letra-mayusculas letra-negrita" style="text-align: left;">';for(var s=getRRSS(data[t].rrss),r=0;r<s.length;r++)s[r].length>0&&(o+='<a  href="'+s[r]+'" style="cursor: pointer; margin-left: 1px;margin-right: 1px;"\ttarget="_blank"> ',0==r?o+='<i class="fa fa-facebook facebook-icon" aria-hidden="true"> </i>':1==r?o+='<i class="fa fa-instagram facebook-icon" aria-hidden="true"> </i>':2==r?o+='<i\tclass="fa fa-twitter facebook-icon"> </i>':3==r?o+='<i\tclass="fa fa-pinterest facebook-icon"> </i>':4==r?o+='<i class="fa fa-behance-square facebook-icon" aria-hidden="true"></i>':5==r&&(o+='<i class="fa fa-linkedin-square facebook-icon" aria-hidden="true"></i>'),o+="</a> ");null!=data[t].blog&&data[t].blog.length>0&&(o+='<a  href="'+data[t].blog+'" style="cursor: pointer; margin-left: 1px;margin-right: 1px;"\ttarget="_blank"> <i class="fa fa-wordpress" aria-hidden="true"></i></a>'),o=(o=(o+='</div></div><div class="col-xs-12">')+'<div id="conocememas" style="z-index: 1; text-align: center; padding-right: .5vw;" class="col-xs-6 letra-xxs letra-mayusculas letra-negrita"><a class="buttonstandard  " onclick="lanzarportfolioindividual('+data[t].id+","+t+",'"+data[t].imagenPrincipal+"','"+data[t].tipo+"')\">conóceme más</a></div>")+'<div id="contratar" style="z-index: 1; text-align: center; padding-left: .5vw;" class="col-xs-6 letra-xxs letra-mayusculas letra-negrita"><a class="buttonstandard_invertido  " onclick="seleccionarDecoradorDentro('+data[t].id+')" >contratar</a></div>',o+="</div></div></div></div>"}o+='<div id="todos-diseñadores" style="z-index: 1; text-align: center; padding:0px!important;" class="col-xs-12 letra-s letra-mayusculas "><a class="buttonstandard"  style="border:0;border-top:1px solid black;" href="#">todos los diseñadores</a></div>',$("#divforescogerdecoradordentro").html(o)}function colocarItemsDecoradoresDentroSeleccionarBefore(a){data=a;var o="",e=5;data.length<5&&(e=data.length);for(var t=0;t<e;t++){o+='<div id="itemchoosedecorator1" style="border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: black; background-color: white; padding-bottom:4%; padding-top:4%; " class="row-eq-height " >',0==t&&(o+='<a   style="position: absolute;right: 3px; top: 0px; color: black; cursor: pointer;" data-dismiss="modal"\t> ',o+='<i class="fa fa-times" aria-hidden="true"></i>',o+="</a> "),o=(o+='<div id="foto" class="col-xs-3" style="">')+'<img alt="cara" style="padding: 5%; min-width: 75px; width:90%; border-radius: 50%; border-style: solid; border-color: white; border-width: medium;" src="'+data[t].imagenCara+'">',o=(o+='</div><div id="componentes" class="col-xs-9 col-bordered" style="padding-right: 0px"><div id="nombre_choose" class="col-xs-12  letra-xs letra-mayusculas letra-negrita">')+'<div class="col-xs-12" style="display:table; height: 100%; text-align: left;"><span style=" display: table-cell; vertical-align: middle;">'+data[t].tipo+"</span></div>",o+='</div><div id="rrss_choose" class="col-xs-12 letra-xs letra-mayusculas letra-negrita" style="text-align: left;"><div id="rrss_encuadre" class="col-xs-12 letra-xs letra-mayusculas letra-negrita" style="text-align: left;">';for(var s=getRRSS(data[t].rrss),r=0;r<s.length;r++)s[r].length>0&&(o+='<a  href="'+s[r]+'" style="cursor: pointer; margin-left: 1px;margin-right: 1px;"\ttarget="_blank"> ',0==r?o+='<i class="fa fa-facebook facebook-icon" aria-hidden="true"> </i>':1==r?o+='<i class="fa fa-instagram facebook-icon" aria-hidden="true"> </i>':2==r?o+='<i\tclass="fa fa-twitter facebook-icon"> </i>':3==r?o+='<i\tclass="fa fa-pinterest facebook-icon"> </i>':4==r?o+='<i class="fa fa-behance-square facebook-icon" aria-hidden="true"></i>':5==r&&(o+='<i class="fa fa-linkedin-square facebook-icon" aria-hidden="true"></i>'),o+="</a> ");null!=data[t].blog&&data[t].blog.length>0&&(o+='<a  href="'+data[t].blog+'" style="cursor: pointer; margin-left: 1px;margin-right: 1px;"\ttarget="_blank"> <i class="fa fa-wordpress" aria-hidden="true"></i></a>'),o=(o=(o+='</div></div><div class="col-xs-12">')+'<div id="conocememas" style="z-index: 1; text-align: center; padding-right: .5vw;" class="col-xs-6 letra-xxs letra-mayusculas letra-negrita"><a class="buttonstandard  " onclick="lanzarportfolioindividual('+data[t].id+","+t+",'"+data[t].imagenPrincipal+"','"+data[t].tipo+",'"+id_proyecto+"')\">conóceme más</a></div>")+'<div id="contratar" style="z-index: 1; text-align: center; padding-left: .5vw;" class="col-xs-6 letra-xxs letra-mayusculas letra-negrita"><a class="buttonstandard_invertido  " onclick="seleccionarDecoradorDentroBefore('+data[t].id+')" >contratar</a></div>',o+="</div></div></div></div>"}o=o+'<div id="todos-diseñadores" style="z-index: 1; text-align: center; padding:0px!important;" class="col-xs-12 letra-s letra-mayusculas "><a class="buttonstandard  " style="border:0;border-top:1px solid black;" href="'+urlbase+'/decoradores-online.html">todos los diseñadores</a></div>',$("#divforescogerdecoradordentro").html(o)}function seleccionarDecorador(a,o){var e=a;$("#modalforchoosedecorator").modal("show");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/GetPortfolio",data:{tipo:"Decoradores"},contentType:"application/json; charset=utf-8",success:function(a){localStorage.removeItem("portfolio_decoradores"),localStorage.setItem("portfolio_decoradores",JSON.stringify(a)),colocarItemsDecoradoresDentroHome(a,e,o)},error:function(a,o,e){$("#modalforchoosedecorator").modal("hide")}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),$("#modalforchoosedecorator").modal("hide")}}function seleccionadecorador(){$("#modalforchoosedecorator").modal("show");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/GetPortfolio",data:{tipo:"Decoradores"},contentType:"application/json; charset=utf-8",success:function(a){localStorage.removeItem("portfolio_decoradores"),localStorage.setItem("portfolio_decoradores",JSON.stringify(a)),colocarItemsDecoradoresDentroSeleccionar(a)},error:function(a,o,e){$("#modalforchoosedecorator").modal("hide")}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),$("#modalforchoosedecorator").modal("hide")}}function seleccionadecoradorBefore(){$("#modalforchoosedecorator").modal("show");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/GetPortfolio",data:{tipo:"Decoradores"},contentType:"application/json; charset=utf-8",success:function(a){localStorage.removeItem("portfolio_decoradores"),localStorage.setItem("portfolio_decoradores",JSON.stringify(a)),colocarItemsDecoradoresDentroSeleccionarBefore(a)},error:function(a,o,e){$("#modalforchoosedecorator").modal("hide")}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),$("#modalforchoosedecorator").modal("hide")}}function isError(a){return"ERROR"==a.toString().substring(0,5)}function seleccionarDecoradorDentro(a){$("#modalforchoosedecorator").modal("hide"),setCookie("id_decorador_seleccionado",a,365),setTimeout(function(){continuarAfterMoodboard()},1e3)}function seleccionarDecoradorDentroBefore(a){$("#modalforchoosedecorator").modal("hide"),setCookie("id_decorador_seleccionado",a,365),setTimeout(function(){continuarBeforeMoodboard()},1e3)}function loginForPAso3(a,o){function e(a,o){a.fadeOut(n,function(){$(this).text(o).fadeIn(n)})}function t(a,o,t,s,r,n){var c=a.text();e(t,n),a.addClass(s),o.removeClass("glyphicon-chevron-right"),o.addClass(r+" "+s),setTimeout(function(){e(t,c),a.removeClass(s),o.addClass("glyphicon-chevron-right"),o.removeClass(r+" "+s)},i)}var s=a,r=o,n=($("#login-form"),$("#lost-form"),$("#register-form"),$("#div-forms"),150),i=2e3,c=getCookie("id_proyectoglobal");try{$.ajax({dataType:"json",url:urlbaseForAjax+"/GetUser",data:{mail:s,pass:r,detail_level:3,id_proyecto:c},contentType:"application/json; charset=utf-8",success:function(a){var o=a.id,e=(a.mail,a.userName);if(proyectos_ajax=a.proyectos,o<0)t($("#div-login-msg"),$("#icon-login-msg"),$("#text-login-msg"),"error","glyphicon-remove","Algun dato es incorrecto"),clearAllCookies();else{t($("#div-login-msg"),$("#icon-login-msg"),$("#text-login-msg"),"success","glyphicon-ok","Datos Correctos");var s="";s+='<li id="liforsustitution" class="dropdown ">',s+='<a href="#" class="dropdown-toggle  colornegro letraAriallogin  interspaciado_2" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i style="margin-right:5px;" class="fa fa-user" aria-hidden="true"></i>'+e+'<span class="caret"></span></a>',s+='<ul class="dropdown-menu">',proyectos_ajax.length<=1?s+='<li class="dropdown-header" style="color:grey;padding-top:8px" onclick="">Lista de proyectos</li>':s+='<li class="dropdown-header colornegro " style="cursor:pointer;padding-top:8px" onclick="aHomeUsuarios()">Lista de proyectos</li>';for(var r=0;r<proyectos_ajax.length;r++)c==proyectos_ajax[r].id&&(proyectoObject=proyectos_ajax[r]);cargarProjectoPaso3(c);var n=urlbase;s+='<li role="separator" class="divider"></li>',s+='<li><a class=" colornegro letraAriallogin  interspaciado_2" href="'+n+'/decoracion-online.html" onclick="nuevoProyecto()">Iniciar nuevo proyecto</a></li>',s+=' <li role="separator" class="divider"></li>',s+='<li><a class=" colornegro letraAriallogin  interspaciado_2" href="'+n+'" onclick="logoutFunction()">Cerrar sesión</a></li>',s+="</ul>",s+=" </li>",$("#liforsustitution").remove(),$("#ulforsustitution").append(s),1==checklogintosave&&(saveAndInitProject(),checklogintosave=0),setTimeout(function(){$("#login-modal").modal("hide")},1500)}goChat(e,c,150)},error:function(a,o){cerrarCargando()}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),cerrarCargando()}}function loginForPAso4(a,o){function e(a,o){a.fadeOut(n,function(){$(this).text(o).fadeIn(n)})}function t(a,o,t,s,r,n){var c=a.text();e(t,n),a.addClass(s),o.removeClass("glyphicon-chevron-right"),o.addClass(r+" "+s),setTimeout(function(){e(t,c),a.removeClass(s),o.addClass("glyphicon-chevron-right"),o.removeClass(r+" "+s)},i)}var s=a,r=o,n=($("#login-form"),$("#lost-form"),$("#register-form"),$("#div-forms"),150),i=2e3,c=getCookie("id_proyectoglobal");try{$.ajax({dataType:"json",url:urlbaseForAjax+"/GetUser",data:{mail:s,pass:r,detail_level:4,id_proyecto:c},contentType:"application/json; charset=utf-8",success:function(a){var o=a.id,e=(a.mail,a.userName);if(proyectos_ajax=a.proyectos,o<0)t($("#div-login-msg"),$("#icon-login-msg"),$("#text-login-msg"),"error","glyphicon-remove","Algun dato es incorrecto"),clearAllCookies();else{t($("#div-login-msg"),$("#icon-login-msg"),$("#text-login-msg"),"success","glyphicon-ok","Datos Correctos");var s="";s+='<li id="liforsustitution" class="dropdown ">',s+='<a href="#" class="dropdown-toggle  colornegro letraAriallogin  interspaciado_2" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i style="margin-right:5px;" class="fa fa-user" aria-hidden="true"></i>'+e+'<span class="caret"></span></a>',s+='<ul class="dropdown-menu">',proyectos_ajax.length<=1?s+='<li class="dropdown-header" style="color:grey;padding-top:8px" onclick="">Lista de proyectos</li>':s+='<li class="dropdown-header colornegro " style="cursor:pointer;padding-top:8px" onclick="aHomeUsuarios()">Lista de proyectos</li>';for(var r=0;r<proyectos_ajax.length;r++)c==proyectos_ajax[r].id&&(proyectoObject=proyectos_ajax[r]);cargarProjectoPaso4(c);var n=urlbase;s+='<li role="separator" class="divider"></li>',s+='<li><a class=" colornegro letraAriallogin  interspaciado_2" href="'+n+'/decoracion-online.html" onclick="nuevoProyecto()">Iniciar nuevo proyecto</a></li>',s+=' <li role="separator" class="divider"></li>',s+='<li><a class=" colornegro letraAriallogin  interspaciado_2" href="'+n+'" onclick="logoutFunction()">Cerrar sesión</a></li>',s+="</ul>",s+=" </li>",$("#liforsustitution").remove(),$("#ulforsustitution").append(s),1==checklogintosave&&(saveAndInitProject(),checklogintosave=0),setTimeout(function(){$("#login-modal").modal("hide")},1500)}goChat(e,c,150)},error:function(a,o){cerrarCargando()}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),cerrarCargando()}}function getColorsModBoardFilter(){var a=getCookie("paso4");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/GetColorsModBoard",data:{paso4:a},contentType:"application/json; charset=utf-8",success:function(a){var o="";o+='<div style="width: 100%; text-align: center;">',o+='<h4 class="titulo_pantalla">COLORES</h4> <h4 class="subtitulo_pantalla" style="margin-bottom:3%"> ',o+='<p class="letra-s">Selecciona 3 colores de las siguientes paletas que encajen con tu idea</p> </h4> ',o+='<div  class=" container-fluid  text-center">';for(var e=0;e<a.length;e++){o+='<div class="col-md-4 col-sm-6 col-xs-12" >',o+='<div><img style="width: 100%;" src="img/colores_modboard/'+a[e].nombreImagen+'" alt="'+a[e].nombreImagen+'" /></div>',o+='<div><div class="row row_without_padding" >';for(var t=1;t<=6;t++){var s=a[e],r="color"+t;o+='<div class="cc_modboard_padding cc-selector-2 col-xs-2 " onclick="checkRadioButtonsPaso7()" >',o+='<input type="checkbox" name="radioColorMod" id="'+s[r]+'" style="display: none;" value="'+s[r]+'" />',o+='<label style="background-color: #'+s[r]+'; width: 100%; height: 100px;"  class="drinkcard-cc_mod separacionBottom_20" for="'+s[r]+'"> ',o+='<img style="background-color: #'+s[r]+'; width: 100%; height: 100%;"  /></label></div>'}o+="</div></div></div>"}o+="</div>",o+='<div class="row   text-center separacionSuperior_botonera"> <button type="button" href="#myCarousel" data-slide="prev" onclick="clickAnterior()" class="boton-anterior  separacionDerecha_5"></button>',o+='<button type="button" id="botonSiguientePaso7" href="#myCarousel" data-slide="next" class="boton-siguiente  separacionIzq_5 disabled" onclick="clickSiguientePaso7()"></button></div>',o+="<br/>",o+="<br/>",$("#divforcolorss").html(o)}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}function getImagesFilter(){var a=getCookie("paso1"),o=getCookie("paso2"),e=getCookie("paso3"),t=getCookie("paso4"),s=getCookie("paso5");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",crossOrigin:!0,url:urlbaseForAjax+"/GetImages",data:{paso1:a,paso2:o,paso3:e,paso4:t,paso5:s},contentType:"application/json; charset=utf-8",success:function(a){var o="";o+='<div style="width: 100%; text-align: center;">',o+='<h4 class="titulo_pantalla">IMÁGENES</h4> <h4 class="subtitulo_pantalla" style="margin-bottom:3%"> ',o+='<p class="letra-s">Selecciona 3 fotografías que te inspiren.</p> </h4> ',o+='<div id="divforimages" class="masonry container-fluid  text-center" >';for(var e=0;e<a.length;e++)o+='<div style="position: relative;" class="cc-selector" onclick="checkRadioButtonsPaso6()">',o+='<input type="checkbox" name="radioimagenes" id="'+a[e].nombre+'" style="display: none;" value="'+a[e].nombre+'" />',o+='<label  class="drinkcard-cc separacionBottom_20" for="'+a[e].nombre+'">',o+='<img style="box-shadow: 0 0 0px 0px #e9d12f; width: 100%;"  src="img/imagenes/'+a[e].nombre+'" alt="'+a[e].nombre+'"/><img src="img/other/whitepixel.png"   class="seleccionadaimagenover"/><img  src="img/other/okimage.svg"  class="seleccionadaimagen"/>',o+="</label>",o+="</div>";o+="</div>",o+='<div class="row   text-center separacionSuperior_botonera"> <button type="button" href="#myCarousel" data-slide="prev" onclick="clickAnterior()" class="boton-anterior  separacionDerecha_5"></button>',o+='<button type="button" id="botonSiguientePaso6" href="#myCarousel" data-slide="next" class="boton-siguiente  separacionIzq_5 disabled" onclick="clickSiguientePaso6()"></button></div>',o+="<br/>",o+="<br/>",$("#divforimages").html(o)}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}function getSensacionesFilter(){var a=getCookie("paso1"),o=getCookie("paso4");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/GetSensaciones",data:{paso1:a,paso4:o},contentType:"application/json; charset=utf-8",success:function(a){var o="";o+='<div style="width: 100%; text-align: center;">',o+='<h4 class="titulo_pantalla">SENSACIONES</h4> <h4 class="subtitulo_pantalla" style="margin-bottom:3%"> ',o+='<p class="letra-s">La vida para ti son estas 2 cosas (entre muchas otras claro...)</p> </h4> ',o+='<div  class="masonry container-fluid  text-center">';for(var e=0;e<a.length;e++)o+='<div style="position: relative;"  class="cc-selector" onclick="checkRadioButtonsPaso8a()">',o+='<input type="checkbox" name="radioSensacionesMod" id="sensations_'+a[e].nombre+'" style="display: none;" value="'+a[e].nombre+'" />',o+='<label  class="drinkcard-cc separacionBottom_20" for="sensations_'+a[e].nombre+'">',o+='<img style="box-shadow: 0 0 0px 0px #e9d12f; width: 100%;"  src="img/imagenes/'+a[e].nombre+'" alt="'+a[e].nombre+'"/><img src="img/other/whitepixel.png"   class="seleccionadaimagenover"/><img  src="img/other/okimage.svg"  class="seleccionadaimagen"/>',o+="</label>",o+="</div>";o+="</div>",o+='<div class="row   text-center separacionSuperior_botonera"> <button type="button" href="#myCarousel" data-slide="prev" onclick="clickAnterior()" class="boton-anterior  separacionDerecha_5 "></button>',o+='<button type="button" id="botonSiguientePaso8a" href="#myCarousel" data-slide="next" class="boton-siguiente  separacionIzq_5 disabled" onclick="clickSiguientePaso8a()"></button></div>',o+="<br/>",o+="<br/>",$("#divforsensaciones").html(o)}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}function getFrasesFilter(){var a=getCookie("paso1"),o=getCookie("paso4");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/GetFrases",data:{paso1:a,paso4:o},contentType:"application/json; charset=utf-8",success:function(a){var o="";o+='<div style="width: 100%; text-align: center;">',o+='<h4 class="titulo_pantalla">FRASES</h4> <h4 class="subtitulo_pantalla" style="margin-bottom:3%"> ',o+='<p class="letra-s">Unas palabras que te inspiren...</p> </h4> ',o+='<div  class="masonry container-fluid  text-center">';for(var e=0;e<a.length;e++)o+='<div style="position: relative;"  class="cc-selector" onclick="checkRadioButtonsPaso8b()">',o+='<input type="checkbox" name="radioSensacionesModb" id="sensations_'+a[e].nombre+'" style="display: none;" value="'+a[e].nombre+'" />',o+='<label  class="drinkcard-cc separacionBottom_20" for="sensations_'+a[e].nombre+'">',o+='<img style="box-shadow: 0 0 0px 0px #e9d12f; width: 100%;"  src="img/imagenes/'+a[e].nombre+'" alt="'+a[e].nombre+'"/><img src="img/other/whitepixel.png"   class="seleccionadaimagenover"/><img  src="img/other/okimage.svg"  class="seleccionadaimagen"/>',o+="</label>",o+="</div>";o+="</div>",o+='<div class="row   text-center separacionSuperior_botonera"> <button type="button" href="#myCarousel" data-slide="prev" onclick="clickAnterior()" class="boton-anterior  separacionDerecha_5 "></button>',o+='<button type="button" id="botonSiguientePaso8b" href="#myCarousel" data-slide="next" class="boton-siguiente  separacionIzq_5 disabled" onclick="clickSiguientePaso8b()"></button></div>',o+="<br/>",o+="<br/>",$("#divforfrases").html(o)},error:function(a,o){cerrarCargando()},complete:function(a,o){cerrarCargando()}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}function deleteProjecto(a){BootstrapDialog.confirm({title:".ADVERTENCIA.",message:"Cuidado! Si eliminas este proyecto perderás todos los datos y no se podrán recuperar",type:BootstrapDialog.TYPE_PRIMARY,closable:!0,draggable:!0,btnCancelLabel:"mejor NO",btnOKLabel:"Elimínalo!",btnOKClass:"btn-warning",callback:function(o){if(o)try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/DeleteProject",data:{id_proyecto:a},contentType:"application/json; charset=utf-8",success:function(a){if(0!=a)BootstrapDialog.alert("error");else{var o=urlbase+"/Home.html";window.location=o}}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}})}function deleteProject(){var a=getCookie("id_proyectoglobal");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/DeleteProject",data:{id_proyecto:a},contentType:"application/json; charset=utf-8",success:function(a){0!=a?BootstrapDialog.alert("error"):BootstrapDialog.confirm({title:".ADVERTENCIA.",message:"Cuidado! Si eliminas este proyecto perderás todos los datos y no se podrán recuperar",type:BootstrapDialog.TYPE_PRIMARY,closable:!0,draggable:!0,btnCancelLabel:"mejor NO",btnOKLabel:"Elimínalo!",btnOKClass:"btn-warning",callback:function(a){if(a){setCookie("nuevo_Proyecto","1",365);var o=urlbase+"/decoracion-online.html";window.location=o}}})}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidora")}}function cargarProjectoCTM(a){deleteCookie("nuevo_Proyecto"),setCookie("id_proyectoglobal",a,365),cargarDropzonePlanos(!0)}function cargarProjectoPaso1(a){if(deleteCookie("nuevo_Proyecto"),setCookie("id_proyectoglobal",a,365),proyectoObject.pagado<=0){var o=urlbase+"/Home.html";window.location=o}else{var e="";e='<div id="carouselinnerForImages2" class=" conefectos carousel-inner" role="listbox" style="text-transform: uppercase;width:90%;margin-left:5%;">';for(var t="",s="",r=0;r<proyectoObject.preferencias.length;r++)""==proyectoObject.preferencias[r].id_moodboard&&0==proyectoObject.preferencias[r].id_moodboard||(s="existe");for(var n="",i=0,c=0;c<proyectoObject.preferencias.length;c++){var l=proyectoObject.preferencias[c].id_moodboard;"existe"==s?""==l||0==l||"proyecto.png"==l?t="noColocar":(t="colocar",n++):""!=l&&0!=l||("dormitorio-infantil"==(t=proyectoObject.preferencias[c].habitacion)&&(t="infantil"),"escritorio"==t&&(t="despacho"),"recibidor"==t&&(t="entrada")),0==c||1==n?"noColocar"!=t&&(""==l||0==l?(i++,e+='<div class="conefectossuaves text-center item active"><img id="imgMoodboard" src="'+urlbase+"/img/"+t+'.png";" style="border:1px solid grey;" alt="'+t+'"/>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>"):(i++,e+='<div class="conefectossuaves text-center item active"><a  onclick="lanzarPopUpImagenesPasos('+a+","+c+')" style="cursor: pointer"\ttarget="_blank"><img id="imgMoodboard" src="'+urlbaseForMoodboards+"/moodboards/"+l+'.png" style="border:1px solid grey;" alt="Moodboard"/></a>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>",$("#imgMoodboard").attr("src",urlbaseForMoodboards+"/moodboards/"+l+".png"),$("#imgMoodboard").attr("onclick","lanzarPopUpImagenesPasos(0,0);"))):"noColocar"!=t&&(""==l||0==l?(i++,e+='<div class="conefectossuaves text-center item"><img id="imgMoodboard" src="'+urlbase+"/img/"+t+'.png";" style="border:1px solid grey;" alt="'+t+'"/>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>"):(i++,e+='<div class="conefectossuaves text-center item"><a  onclick="lanzarPopUpImagenesPasos('+a+","+c+')" style="cursor: pointer"\ttarget="_blank"><img id="imgMoodboard" src="'+urlbaseForMoodboards+"/moodboards/"+l+'.png" style="border:1px solid grey;" alt="Moodboard"/></a>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>",$("#imgMoodboard").attr("src",urlbaseForMoodboards+"/moodboards/"+l+".png"),$("#imgMoodboard").attr("onclick","lanzarPopUpImagenesPasos(0,0);")))}e+="</div>",i>1&&(e+='<a  style="width: 2%; text-align:left;text-shadow: none; background-image: none;  color:black;   -webkit-text-stroke: 5px white;" class=" conefectossuaves carousel-control left" href="#myCarousel2" data-slide="prev">',e+='       <span class=" conefectossuaves glyphicon glyphicon-chevron-left"></span>',e+="      </a>",e+='       <a  style="width: 2%; text-align:right; text-shadow: none; background-image: none; color:black;  -webkit-text-stroke: 5px white;"  class=" conefectossuaves carousel-control right" href="#myCarousel2" data-slide="next">',e+='            <span class=" conefectossuaves glyphicon glyphicon-chevron-right"></span>',e+="        </a>");var d=new Date(proyectoObject.fechaestado)-new Date,p=d/864e5,m="";(m=Math.ceil(p))>=1?(m="( Responderá en menos de "+m+" días )","Finalizado"!=proyectoObject.projectsStates.nombre&&"Finalizado con Factura"!=proyectoObject.projectsStates.nombre||(m="")):m="Finalizado"==proyectoObject.projectsStates.nombre||"Finalizado con Factura"==proyectoObject.projectsStates.nombre?"":"( El decorador no cumplió el plazo, estamos tratando de solucionarlo )";var g=[],u=[];console.log(proyectoObject);var v=new Image;v.src=" "+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador,v.onload=function(){u=this.width,g=this.height};var b="";if("usuario"==proyectoObject.projectsStates.turnoDe){if(d<0){p=d/864e5;p=0==(p=Math.ceil(p))?"( Estás en este paso desde hoy )":-1==p?"( Estás en este paso desde hace "+-1*p+" día )":"( Estás en este paso desde hace "+-1*p+" días )"}else p="";b="Finalizado"==proyectoObject.projectsStates.nombre||"Finalizado con Factura"==proyectoObject.projectsStates.nombre?"":p}else b=m;var h="";h+='<div id="Chat" class="textarea-p2" style="margin-left:0;width:100%;height:290px;border:1px solid black;margin-bottom:30px">',h+='<div id="chat-window" >',h+='\t<div id="message-list" class="row disconnected"></div>',h+='\t\t<div id="typing-row" class="row disconnected">',h+='\t\t\t<p id="typing-placeholder"></p>',h+="\t\t</div>",h+="</div>",h+="</div>",h+='<div class="decorador">',g<=u?(h+='<div id="imagencara" style="padding:0;text-align:center; border-radius: 50%; margin-top: 15px;border-style: solid; border-color: white; border-width: medium;text-align:center;overflow:hidden" class="col-xs-12">',h+='<img alt="cara" style="width:auto;height:100%;" src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'">'):(h+='<div id="imagencara" style="padding-left:0;margin-left:15px; margin-top: 15px;overflow:hidden;border-radius: 50%; border-style: solid; border-color: white; border-width: medium;text-align:center" class="col-xs-12">',h+='<img alt="cara" id="cara" style="width:100%;height:auto;" src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'">'),proyectoObject.nombreDecorador.length>15?h+='</div><div style="z-index: 1; margin-top: 10px; padding-top: 10px; text-align: center;   " class="col-xs-12 letra-xs letra-mayusculas largoPasos">':h+='</div><div style="z-index: 1; margin-top: 10px; padding-top: 10px; text-align: center;   " class="col-xs-12 letra-xs letra-mayusculas">',h+=proyectoObject.nombreDecorador+"</div>",h+="</div>",proyectoObject.estado<100?(h+='<div class="letra-s buttonstandard_invertido aviso" onclick="messagesMail()" style="margin-bottom:10px; float: left">¿No he leído tus mensajes? ¡Avísame!</div>',h+='<div id="input-div">',h+='\t<textarea id="input-text" class="textarea-p3 letra-s" placeholder="ESCRÍBEME" style="resize: none;overflow-x:hidden;overflow:auto"></textarea>',h+="</div>"):(h+='<div class="letra-s buttonstandard_invertido aviso"  style="margin-bottom:10px; float: left">PROYECTO FINALIZADO</div>',h+='<div id="input-div">',h+='\t<textarea id="input-text" class="textarea-p3 letra-s" placeholder="Ya no puedes escribír a este decorador" style="resize: none;overflow-x:hidden;overflow:auto" readonly="readonly"></textarea>',h+="</div>"),$(".chat").html(h),$("#caraDecorador").append('<img src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'" alt="'+proyectoObject.nombreDecorador+'">'),$("#nombreProyecto").append(proyectoObject.nombreProyecto),$("#estadoProyecto").append(proyectoObject.projectsStates.texto_usuarios),""!=b&&$("#estadoProyecto").prop("title",b),crearbotones_grandes_pasos(),setFormularioPaso1()}}function cargarProjectoPaso2(a){if(deleteCookie("nuevo_Proyecto"),setCookie("id_proyectoglobal",a,365),proyectoObject.estado<21){var o=urlbase+"/Home.html";window.location=o}else{var e="";e='<div id="carouselinnerForImages2" class=" conefectos carousel-inner" role="listbox" style="text-transform: uppercase;width:90%;margin-left:5%;">';for(var t="",s="",r=0;r<proyectoObject.preferencias.length;r++)""==proyectoObject.preferencias[r].id_moodboard&&0==proyectoObject.preferencias[r].id_moodboard||(s="existe");for(var n="",i=0,c=0;c<proyectoObject.preferencias.length;c++){var l=proyectoObject.preferencias[c].id_moodboard;"existe"==s?""==l||0==l||"proyecto.png"==l?t="noColocar":(t="colocar",n++):""!=l&&0!=l||("dormitorio-infantil"==(t=proyectoObject.preferencias[c].habitacion)&&(t="infantil"),"escritorio"==t&&(t="despacho"),"recibidor"==t&&(t="entrada")),0==c||1==n?"noColocar"!=t&&(""==l||0==l?(i++,e+='<div class="conefectossuaves text-center item active"><img id="imgMoodboard" src="'+urlbase+"/img/"+t+'.png";" style="border:1px solid grey;" alt="'+t+'"/>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>"):(i++,e+='<div class="conefectossuaves text-center item active"><a  onclick="lanzarPopUpImagenesPasos('+a+","+c+')" style="cursor: pointer"\ttarget="_blank"><img id="imgMoodboard" src="'+urlbaseForMoodboards+"/moodboards/"+l+'.png" style="border:1px solid grey;" alt="Moodboard"/></a>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>",$("#imgMoodboard").attr("src",urlbaseForMoodboards+"/moodboards/"+l+".png"),$("#imgMoodboard").attr("onclick","lanzarPopUpImagenesPasos(0,0);"))):"noColocar"!=t&&(""==l||0==l?(i++,e+='<div class="conefectossuaves text-center item"><img id="imgMoodboard" src="'+urlbase+"/img/"+t+'.png";" style="border:1px solid grey;" alt="'+t+'"/>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>"):(i++,e+='<div class="conefectossuaves text-center item"><a  onclick="lanzarPopUpImagenesPasos('+a+","+c+')" style="cursor: pointer"\ttarget="_blank"><img id="imgMoodboard" src="'+urlbaseForMoodboards+"/moodboards/"+l+'.png" style="border:1px solid grey;" alt="Moodboard"/></a>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>",$("#imgMoodboard").attr("src",urlbaseForMoodboards+"/moodboards/"+l+".png"),$("#imgMoodboard").attr("onclick","lanzarPopUpImagenesPasos(0,0);")))}e+="</div>",i>1&&(e+='<a  style="width: 2%; text-align:left;text-shadow: none; background-image: none;  color:black;   -webkit-text-stroke: 5px white;" class=" conefectossuaves carousel-control left" href="#myCarousel2" data-slide="prev">',e+='       <span class=" conefectossuaves glyphicon glyphicon-chevron-left"></span>',e+="      </a>",e+='       <a  style="width: 2%; text-align:right; text-shadow: none; background-image: none; color:black;  -webkit-text-stroke: 5px white;"  class=" conefectossuaves carousel-control right" href="#myCarousel2" data-slide="next">',e+='            <span class=" conefectossuaves glyphicon glyphicon-chevron-right"></span>',e+="        </a>");var d=new Date(proyectoObject.fechaestado)-new Date,p=d/864e5,m="";(m=Math.ceil(p))>=1?(m="( Responderá en menos de "+m+" días )","Finalizado"!=proyectoObject.projectsStates.nombre&&"Finalizado con Factura"!=proyectoObject.projectsStates.nombre||(m="")):m="Finalizado"==proyectoObject.projectsStates.nombre||"Finalizado con Factura"==proyectoObject.projectsStates.nombre?"":"( El decorador no cumplió el plazo, estamos tratando de solucionarlo )";var g=[],u=[],v=new Image;v.src=" "+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador,v.onload=function(){u=this.width,g=this.height};var b="";if("usuario"==proyectoObject.projectsStates.turnoDe){if(d<0){p=d/864e5;p=0==(p=Math.ceil(p))?"( Estás en este paso desde hoy )":-1==p?"( Estás en este paso desde hace "+-1*p+" día )":"( Estás en este paso desde hace "+-1*p+" días )"}else p="";b="Finalizado"==proyectoObject.projectsStates.nombre||"Finalizado con Factura"==proyectoObject.projectsStates.nombre?"":p}else b=m;var h="";h+='<div id="Chat" class="textarea-p2" style="margin-left:0;width:100%;height:290px;border:1px solid black;margin-bottom:30px">',h+='<div id="chat-window" >',h+='\t<div id="message-list" class="row disconnected"></div>',h+='\t\t<div id="typing-row" class="row disconnected">',h+='\t\t\t<p id="typing-placeholder"></p>',h+="\t\t</div>",h+="</div>",h+="</div>",h+='<div class="decorador">',g<=u?(h+='<div id="imagencara" style="padding:0;text-align:center; border-radius: 50%; margin-top: 15px;border-style: solid; border-color: white; border-width: medium;text-align:center;overflow:hidden" class="col-xs-12">',h+='<img alt="cara" style="width:auto;height:100%;" src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'">'):(h+='<div id="imagencara" style="padding-left:0;margin-left:15px; margin-top: 15px;overflow:hidden;border-radius: 50%; border-style: solid; border-color: white; border-width: medium;text-align:center" class="col-xs-12">',h+='<img alt="cara" id="cara" style="width:100%;height:auto;" src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'">'),proyectoObject.nombreDecorador.length>15?h+='</div><div style="z-index: 1; margin-top: 10px; padding-top: 10px; text-align: center;   " class="col-xs-12 letra-xs letra-mayusculas largoPasos">':h+='</div><div style="z-index: 1; margin-top: 10px; padding-top: 10px; text-align: center;   " class="col-xs-12 letra-xs letra-mayusculas">',h+=proyectoObject.nombreDecorador+"</div>",h+="</div>",proyectoObject.estado<100?(h+='<div class="letra-s buttonstandard_invertido aviso" onclick="messagesMail()"  style="margin-bottom:10px; float: left">¿No he leído tus mensajes? ¡Avísame!</div>',h+='<div id="input-div">',h+='\t<textarea id="input-text" class="textarea-p3 letra-s" placeholder="ESCRÍBEME" style="resize: none;overflow-x:hidden;overflow:auto"></textarea>',h+="</div>"):(h+='<div class="letra-s buttonstandard_invertido aviso"  style="margin-bottom:10px; float: left">PROYECTO FINALIZADO</div>',h+='<div id="input-div">',h+='\t<textarea id="input-text" class="textarea-p3 letra-s" placeholder="Ya no puedes escribír a este decorador" style="resize: none;overflow-x:hidden;overflow:auto" readonly="readonly"></textarea>',h+="</div>"),$(".chat").html(h),$("#caraDecorador").append('<img src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'" alt="'+proyectoObject.nombreDecorador+'">'),$("#nombreProyecto").append(proyectoObject.nombreProyecto),$("#estadoProyecto").append(proyectoObject.projectsStates.texto_usuarios),""!=b&&$("#estadoProyecto").prop("title",b),crearbotones_grandes_pasos(),setFormularioPaso2()}}function cargarProjectoPaso3(a){if(deleteCookie("nuevo_Proyecto"),setCookie("id_proyectoglobal",a,365),proyectoObject.estado<40){var o=urlbase+"/Home.html";window.location=o}else{var e="";e='<div id="carouselinnerForImages2" class=" conefectos carousel-inner" role="listbox" style="text-transform: uppercase;width:90%;margin-left:5%;">';for(var t="",s="",r=0;r<proyectoObject.preferencias.length;r++)""==proyectoObject.preferencias[r].id_moodboard&&0==proyectoObject.preferencias[r].id_moodboard||(s="existe");for(var n="",i=0,c=0;c<proyectoObject.preferencias.length;c++){var l=proyectoObject.preferencias[c].id_moodboard;"existe"==s?""==l||0==l||"proyecto.png"==l?t="noColocar":(t="colocar",n++):""!=l&&0!=l||("dormitorio-infantil"==(t=proyectoObject.preferencias[c].habitacion)&&(t="infantil"),"escritorio"==t&&(t="despacho"),"recibidor"==t&&(t="entrada")),0==c||1==n?"noColocar"!=t&&(""==l||0==l?(i++,e+='<div class="conefectossuaves text-center item active"><img id="imgMoodboard" src="'+urlbase+"/img/"+t+'.png";" style="border:1px solid grey;" alt="'+t+'"/>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>"):(i++,e+='<div class="conefectossuaves text-center item active"><a  onclick="lanzarPopUpImagenesPasos('+a+","+c+')" style="cursor: pointer"\ttarget="_blank"><img id="imgMoodboard" src="'+urlbaseForMoodboards+"/moodboards/"+l+'.png" style="border:1px solid grey;" alt="Moodboard"/></a>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>",$("#imgMoodboard").attr("src",urlbaseForMoodboards+"/moodboards/"+l+".png"),$("#imgMoodboard").attr("onclick","lanzarPopUpImagenesPasos(0,0);"))):"noColocar"!=t&&(""==l||0==l?(i++,e+='<div class="conefectossuaves text-center item"><img id="imgMoodboard" src="'+urlbase+"/img/"+t+'.png";" style="border:1px solid grey;" alt="'+t+'"/>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>"):(i++,e+='<div class="conefectossuaves text-center item"><a  onclick="lanzarPopUpImagenesPasos('+a+","+c+')" style="cursor: pointer"\ttarget="_blank"><img id="imgMoodboard" src="'+urlbaseForMoodboards+"/moodboards/"+l+'.png" style="border:1px solid grey;" alt="Moodboard"/></a>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>",$("#imgMoodboard").attr("src",urlbaseForMoodboards+"/moodboards/"+l+".png"),$("#imgMoodboard").attr("onclick","lanzarPopUpImagenesPasos(0,0);")))}e+="</div>",i>1&&(e+='<a  style="width: 2%; text-align:left;text-shadow: none; background-image: none;  color:black;   -webkit-text-stroke: 5px white;" class=" conefectossuaves carousel-control left" href="#myCarousel2" data-slide="prev">',e+='       <span class=" conefectossuaves glyphicon glyphicon-chevron-left"></span>',e+="      </a>",e+='       <a  style="width: 2%; text-align:right; text-shadow: none; background-image: none; color:black;  -webkit-text-stroke: 5px white;"  class=" conefectossuaves carousel-control right" href="#myCarousel2" data-slide="next">',e+='            <span class=" conefectossuaves glyphicon glyphicon-chevron-right"></span>',e+="        </a>");var d=new Date(proyectoObject.fechaestado)-new Date,p=d/864e5,m="";(m=Math.ceil(p))>=1?(m="( Responderá en menos de "+m+" días )","Finalizado"!=proyectoObject.projectsStates.nombre&&"Finalizado con Factura"!=proyectoObject.projectsStates.nombre||(m="")):m="Finalizado"==proyectoObject.projectsStates.nombre||"Finalizado con Factura"==proyectoObject.projectsStates.nombre?"":"( El decorador no cumplió el plazo, estamos tratando de solucionarlo )";var g=[],u=[],v=new Image;v.src=" "+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador,v.onload=function(){u=this.width,g=this.height};var b="";if("usuario"==proyectoObject.projectsStates.turnoDe){if(d<0){p=d/864e5;p=0==(p=Math.ceil(p))?"( Estás en este paso desde hoy )":-1==p?"( Estás en este paso desde hace "+-1*p+" día )":"( Estás en este paso desde hace "+-1*p+" días )"}else p="";b="Finalizado"==proyectoObject.projectsStates.nombre||"Finalizado con Factura"==proyectoObject.projectsStates.nombre?"":p}else b=m;var h="";h+='<div id="Chat" class="textarea-p2" style="margin-left:0;width:100%;height:290px;border:1px solid black;margin-bottom:30px">',h+='<div id="chat-window" >',h+='\t<div id="message-list" class="row disconnected"></div>',h+='\t\t<div id="typing-row" class="row disconnected">',h+='\t\t\t<p id="typing-placeholder"></p>',h+="\t\t</div>",h+="</div>",h+="</div>",h+='<div class="decorador">',g<=u?(h+='<div id="imagencara" style="padding:0;text-align:center; border-radius: 50%; margin-top: 15px;border-style: solid; border-color: white; border-width: medium;text-align:center;overflow:hidden" class="col-xs-12">',h+='<img alt="cara" style="width:auto;height:100%;" src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'">'):(h+='<div id="imagencara" style="padding-left:0;margin-left:15px; margin-top: 15px;overflow:hidden;border-radius: 50%; border-style: solid; border-color: white; border-width: medium;text-align:center" class="col-xs-12">',h+='<img alt="cara" id="cara" style="width:100%;height:auto;" src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'">'),proyectoObject.nombreDecorador.length>15?h+='</div><div style="z-index: 1; margin-top: 10px; padding-top: 10px; text-align: center;   " class="col-xs-12 letra-xs letra-mayusculas largoPasos">':h+='</div><div style="z-index: 1; margin-top: 10px; padding-top: 10px; text-align: center;   " class="col-xs-12 letra-xs letra-mayusculas">',h+=proyectoObject.nombreDecorador+"</div>",h+="</div>",proyectoObject.estado<100?(h+='<div class="letra-s buttonstandard_invertido aviso" onclick="messagesMail()"  style="margin-bottom:10px; float: left">¿No he leído tus mensajes? ¡Avísame!</div>',h+='<div id="input-div">',h+='\t<textarea id="input-text" class="textarea-p3 letra-s" placeholder="ESCRÍBEME" style="resize: none;overflow-x:hidden;overflow:auto"></textarea>',h+="</div>"):(h+='<div class="letra-s buttonstandard_invertido aviso"  style="margin-bottom:10px; float: left">PROYECTO FINALIZADO</div>',h+='<div id="input-div">',h+='\t<textarea id="input-text" class="textarea-p3 letra-s" placeholder="Ya no puedes escribír a este decorador" style="resize: none;overflow-x:hidden;overflow:auto" readonly="readonly"></textarea>',h+="</div>"),$(".chat").html(h),$("#caraDecorador").append('<img  src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'" alt="'+proyectoObject.nombreDecorador+'">'),$("#nombreProyecto").append(proyectoObject.nombreProyecto),$("#estadoProyecto").append(proyectoObject.projectsStates.texto_usuarios),""!=b&&$("#estadoProyecto").prop("title",b),crearbotones_grandes_pasos(),setPropuestas()}}function cargarProjectoPaso4(a){if(deleteCookie("nuevo_Proyecto"),setCookie("id_proyectoglobal",a,365),proyectoObject.estado<80){var o=urlbase+"/Home.html";window.location=o}else{var e="";e='<div id="carouselinnerForImages2" class=" conefectos carousel-inner" role="listbox" style="text-transform: uppercase;width:90%;margin-left:5%;">',console.log(proyectoObject);for(var t="",s="",r=0;r<proyectoObject.preferencias.length;r++)""==proyectoObject.preferencias[r].id_moodboard&&0==proyectoObject.preferencias[r].id_moodboard||(s="existe");for(var n="",i=0,c=0;c<proyectoObject.preferencias.length;c++){var l=proyectoObject.preferencias[c].id_moodboard;"existe"==s?""==l||0==l||"proyecto.png"==l?t="noColocar":(t="colocar",n++):""!=l&&0!=l||("dormitorio-infantil"==(t=proyectoObject.preferencias[c].habitacion)&&(t="infantil"),"escritorio"==t&&(t="despacho"),"recibidor"==t&&(t="entrada")),0==c||1==n?"noColocar"!=t&&(""==l||0==l?(i++,e+='<div class="conefectossuaves text-center item active"><img id="imgMoodboard" src="'+urlbase+"/img/"+t+'.png";" style="border:1px solid grey;" alt="'+t+'"/>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>"):(i++,e+='<div class="conefectossuaves text-center item active"><a  onclick="lanzarPopUpImagenesPasos('+a+","+c+')" style="cursor: pointer"\ttarget="_blank"><img id="imgMoodboard" src="'+urlbaseForMoodboards+"/moodboards/"+l+'.png" style="border:1px solid grey;" alt="Moodboard"/></a>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>",$("#imgMoodboard").attr("src",urlbaseForMoodboards+"/moodboards/"+l+".png"),$("#imgMoodboard").attr("onclick","lanzarPopUpImagenesPasos(0,0);"))):"noColocar"!=t&&(""==l||0==l?(i++,e+='<div class="conefectossuaves text-center item"><img id="imgMoodboard" src="'+urlbase+"/img/"+t+'.png";" style="border:1px solid grey;" alt="'+t+'"/>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>"):(i++,e+='<div class="conefectossuaves text-center item"><a  onclick="lanzarPopUpImagenesPasos('+a+","+c+')" style="cursor: pointer"\ttarget="_blank"><img id="imgMoodboard" src="'+urlbaseForMoodboards+"/moodboards/"+l+'.png" style="border:1px solid grey;" alt="Moodboard"/></a>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px">',e+="</div></div>",$("#imgMoodboard").attr("src",urlbaseForMoodboards+"/moodboards/"+l+".png"),$("#imgMoodboard").attr("onclick","lanzarPopUpImagenesPasos(0,0);")))}e+="</div>",i>1&&(e+='<a  style="width: 2%; text-align:left;text-shadow: none; background-image: none;  color:black;   -webkit-text-stroke: 5px white;" class=" conefectossuaves carousel-control left" href="#myCarousel2" data-slide="prev">',e+='       <span class=" conefectossuaves glyphicon glyphicon-chevron-left"></span>',e+="      </a>",e+='       <a  style="width: 2%; text-align:right; text-shadow: none; background-image: none; color:black;  -webkit-text-stroke: 5px white;"  class=" conefectossuaves carousel-control right" href="#myCarousel2" data-slide="next">',e+='            <span class=" conefectossuaves glyphicon glyphicon-chevron-right"></span>',e+="        </a>");var d=new Date(proyectoObject.fechaestado)-new Date,p=d/864e5,m="";(m=Math.ceil(p))>=1?(m="( Responderá en menos de "+m+" días )","Finalizado"!=proyectoObject.projectsStates.nombre&&"Finalizado con Factura"!=proyectoObject.projectsStates.nombre||(m="")):m="Finalizado"==proyectoObject.projectsStates.nombre||"Finalizado con Factura"==proyectoObject.projectsStates.nombre?"":"( El decorador no cumplió el plazo, estamos tratando de solucionarlo )";var g=[],u=[],v=new Image;v.src=" "+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador,v.onload=function(){u=this.width,g=this.height};var b="";if("usuario"==proyectoObject.projectsStates.turnoDe){if(d<0){p=d/864e5;p=0==(p=Math.ceil(p))?"( Estás en este paso desde hoy )":-1==p?"( Estás en este paso desde hace "+-1*p+" día )":"( Estás en este paso desde hace "+-1*p+" días )"}else p="";b="Finalizado"==proyectoObject.projectsStates.nombre||"Finalizado con Factura"==proyectoObject.projectsStates.nombre?"":p}else b=m;var h="";h+='<div id="Chat" class="textarea-p2" style="margin-left:0;width:100%;height:290px;border:1px solid black;margin-bottom:30px">',h+='<div id="chat-window" >',h+='\t<div id="message-list" class="row disconnected"></div>',h+='\t\t<div id="typing-row" class="row disconnected">',h+='\t\t\t<p id="typing-placeholder"></p>',h+="\t\t</div>",h+="</div>",h+="</div>",h+='<div class="decorador">',g<=u?(h+='<div id="imagencara" style="padding:0;text-align:center; border-radius: 50%; margin-top: 15px;border-style: solid; border-color: white; border-width: medium;text-align:center;overflow:hidden" class="col-xs-12">',h+='<img alt="cara" style="width:auto;height:100%;" src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'">'):(h+='<div id="imagencara" style="padding-left:0;margin-left:15px; margin-top: 15px;overflow:hidden;border-radius: 50%; border-style: solid; border-color: white; border-width: medium;text-align:center" class="col-xs-12">',h+='<img alt="cara" id="cara" style="width:100%;height:auto;" src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'">'),proyectoObject.nombreDecorador.length>15?h+='</div><div style="z-index: 1; margin-top: 10px; padding-top: 10px; text-align: center;   " class="col-xs-12 letra-xs letra-mayusculas largoPasos">':h+='</div><div style="z-index: 1; margin-top: 10px; padding-top: 10px; text-align: center;   " class="col-xs-12 letra-xs letra-mayusculas">',h+=proyectoObject.nombreDecorador+"</div>",h+="</div>",proyectoObject.estado<100?(h+='<div class="letra-s buttonstandard_invertido aviso" onclick="messagesMail()"  style="margin-bottom:10px; float: left">¿No he leído tus mensajes? ¡Avísame!</div>',h+='<div id="input-div">',h+='\t<textarea id="input-text" class="textarea-p3 letra-s" placeholder="ESCRÍBEME" style="resize: none;overflow-x:hidden;overflow:auto"></textarea>',h+="</div>"):(h+='<div class="letra-s buttonstandard_invertido aviso"  style="margin-bottom:10px; float: left">PROYECTO FINALIZADO</div>',h+='<div id="input-div">',h+='\t<textarea id="input-text" class="textarea-p3 letra-s" placeholder="Ya no puedes escribír a este decorador" style="resize: none;overflow-x:hidden;overflow:auto" readonly="readonly"></textarea>',h+="</div>"),$(".chat").html(h),$("#caraDecorador").append('<img src="'+urlbuckets3+"decoradores/"+proyectoObject.uniqueDecorador+"/perfiles/cara/"+proyectoObject.caraDecorador+'" alt="'+proyectoObject.nombreDecorador+'">'),$("#nombreProyecto").append(proyectoObject.nombreProyecto),$("#estadoProyecto").append(proyectoObject.projectsStates.texto_usuarios),""!=b&&$("#estadoProyecto").prop("title",b),crearbotones_grandes_pasos(),setTrabajos()}}function clickAnteriorPaso(){clearInterval(cronometro),$("html, body").animate({scrollTop:0},"slow"),pageIndex-=1}function clickSiguientePaso1(){$("html, body").animate({scrollTop:0},"slow"),pageIndex=2}function clickSiguientePaso2(){$("html, body").animate({scrollTop:0},"slow"),pageIndex=3}function clickSiguientePaso3(){$("html, body").animate({scrollTop:0},"slow"),pageIndex=4}function clickSiguientePaso4(){$("html, body").animate({scrollTop:0},"slow"),pageIndex=5,$(".sidebarmenubtnmoodboard").hide()}function clickSiguientePaso5(){var a=0;if(a=getCookie("idmoodboardcreatuinspiracion"),deleteCookie("idmoodboardcreatuinspiracion"),idmoodboard=a,setCookie("id_moodboard",idmoodboard,365),$(".fondoApp").css("background-size","0"),0!=a)return continuarAfterMoodboard(),!1;$("#myCarousel").carousel("next");getCookie("paso6_1");getImagesFilter(),getColorsModBoardFilter(),getSensacionesFilter(),getFrasesFilter(),$("html, body").animate({scrollTop:0},"slow"),pageIndex=6}function pasarAlSiguienteItemCarousel(){$("#myCarousel").carousel("next")}function clickSiguientePaso5b(){$("html, body").animate({scrollTop:0},"slow"),pageIndex=7,$("#myCarousel").carousel("next"),$(".fondoApp").css("background-size","auto"),$("#sidebarmenubtnmoodboard").css("display","inline"),$("#sidebarmenubtnmoodboard").css("right","0"),$("#sidebarmenubtnmoodboard").unbind("click"),document.getElementById("sidebarmenubtnmoodboard").onclick=function(){alaAppCustomSin()},document.getElementById("botonSiguientePaso5b").className=document.getElementById("botonSiguientePaso5b").className.replace(/(?:^|\s)disabled(?!\S)/g,"")}function clickSiguientePaso6(){$("html, body").animate({scrollTop:0},"slow"),pageIndex=8}function clickSiguientePaso7(){$("html, body").animate({scrollTop:0},"slow"),pageIndex=9}function clickSiguientePaso8a(){$("html, body").animate({scrollTop:0},"slow"),pageIndex=10}function clickSiguientePaso8b(){modboardConstruct(),$("html, body").animate({scrollTop:0},"slow"),pageIndex=11}function constructPopUp(a,o,e,t){$("#titulo_for_advice").text(t),0==o&&$("#smallforadvice").text("EL EQUIPO DE DECOTHECO ESTÁ A TODA MÁQUINA GENERANDO TUS CONTENIDOS PARA QUE PUEDAS ACCEDER A ESTA SECCIÓN. PRONTO LLEGAREMOS A ESTE PASO"),0==a&&$("#smallforadvice").text("PARA PODER ACCEDER A ESTE PASO, ANTES DEBES DE COMPRAR EL PROYECTO");var s="img/other/paso"+e+"cabecera.png";document.getElementById("img_logo_for_advice").src=s;var r="img/other/paso-"+e+".gif";document.getElementById("img_logo_principal_for_advice").src=r,$("#modalforpopups").modal("show")}function showPopupPaso1(){constructPopUp(1,1,1,"Cuéntanos")}function showPopupPaso2(){constructPopUp(1,1,2,"¿Hablamos?")}function showPopupPaso3(){constructPopUp(1,1,3,"Propuestas")}function showPopupPaso4(){constructPopUp(1,1,4,"Documentación")}function showPopupPaso2SinPagar(){constructPopUp(0,0,2,"¿Hablamos?")}function showPopupPaso2Pagado(){constructPopUp(1,0,2,"¿Hablamos?")}function showPopupPaso3SinPagar(){constructPopUp(0,0,3,"Propuestas")}function showPopupPaso3Pagado(){constructPopUp(1,0,3,"Propuestas")}function showPopupPaso4SinPagar(){constructPopUp(0,0,4,"Documentación")}function showPopupPaso4Pagado(){constructPopUp(1,0,4,"Documentación")}function irPaso1(){var a=urlbase+"/paso1.html";window.location=a}function irPaso2(){var a=urlbase+"/paso2.html";window.location=a}function irPaso3(){var a=urlbase+"/paso3.html";window.location=a}function irPaso4(){var a=urlbase+"/paso4.html";window.location=a}function crearbotones_grandes_pasos(){var a="";a=botones_grandes_pasos_btn_paso1(),a+=botones_grandes_pasos_btn_paso2(),a+=botones_grandes_pasos_btn_paso3(),a+=botones_grandes_pasos_btn_paso4(),$("#botones_grandes_").html(a)}function aux(){alert("prueba")}function botones_grandes_pasos_btn_paso1(){var a="";return a+='<div id="botones_pasos_grandes_1" class="boton_grande_pasos">',window.location.href.indexOf("paso1")>-1?(a+='<a style="text-align:center"  href="javascript:irPaso1()" >',a+='<div style="color:black" id="div_pre_moodboard_canvas" class="pasos letra-ml">',a+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',a+="1. CUÉNTANOS <br/>",a+='<hr class="h3 barra"/>',a+="</div>"):(a+='<a style="text-align:center"  href="javascript:irPaso1()" >',a+='<div style="color:black" id="div_pre_moodboard_canvas" class="pasos letra-ml">',a+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',a+="1. CUÉNTANOS <br/>",a+='<hr class="h3 barra" style="display:none"/>',a+="</div>"),a+="</a>",a+="</div>"}function botones_grandes_pasos_btn_paso2(){var a=window.location.href,o="";return o+='<div id="botones_pasos_grandes_1" class="boton_grande_pasos">',proyectoObject.estado>11?a.indexOf("paso2")>-1?(o+='<a style="text-align:center"  href="javascript:irPaso2()" >',o+='<div style="color:black" id="div_pre_moodboard_canvas" class="pasos letra-ml">',o+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',o+=" 2. HABLEMOS<br/>",o+='<hr class="h3 barra"/>',o+="</div>"):(o+='<a style="text-align:center"  href="javascript:irPaso2()" >',o+='<div style="color:black" id="div_pre_moodboard_canvas" class="pasos letra-ml">',o+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',o+=" 2. HABLEMOS<br/>",o+='<hr class="h3 barra" style="display:none"/>',o+="</div>"):(o+='<a class="hablemos" style="text-align:center"  href="javascript:completarPaso()" >',o+='<div class="pasos letra-ml colorHablemos" style="color:grey" id="div_pre_moodboard_canvas" >',o+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',o+="2. HABLEMOS <br/>",o+='<hr class="h3 barra" style="display:none"/>',o+="</div>"),o+="</a>",o+="</div>"}function botones_grandes_pasos_btn_paso3(){var a=window.location.href,o="";return o+='<div id="botones_pasos_grandes_1" class="boton_grande_pasos">',proyectoObject.estado>30?a.indexOf("paso3")>-1?(o+='<a style="text-align:center"  href="javascript:irPaso3()" >',o+='<div style="color:black" id="div_pre_moodboard_canvas" class="pasos letra-ml">',o+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',o+="3. PROPUESTAS <br/>",o+='<hr class="h3 barra"/>',o+="</div>"):(o+='<a style="text-align:center"  href="javascript:irPaso3()" >',o+='<div style="color:black" id="div_pre_moodboard_canvas" class="pasos letra-ml">',o+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',o+="3. PROPUESTAS <br/>",o+='<hr class="h3 barra" style="display:none"/>',o+="</div>"):(o+='<a class="propuestas" style="text-align:center"  href="javascript:completarPaso()" >',o+='<div class="pasos letra-ml colorPropuestas" style=" color:grey" id="div_pre_moodboard_canvas">',o+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',o+="3. PROPUESTAS <br/>",o+='<hr class="h3 barra" style="display:none"/>',o+="</div>"),o+="</a>",o+="</div>"}function botones_grandes_pasos_btn_paso4(){var a=window.location.href,o="";return o+='<div id="botones_pasos_grandes_1" class="boton_grande_pasos">',proyectoObject.estado>71?a.indexOf("paso4")>-1?(o+='<a style="text-align:center"  href="javascript:irPaso4()" >',o+='<div style=" color:black" id="div_pre_moodboard_canvas" class="pasos letra-ml">',o+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',o+="4. DOCUMENTACIÓN <br/>",o+='<hr class="h3 barra"/>',o+="</div>"):(o+='<a style="text-align:center"  href="javascript:irPaso4()" >',o+='<div style=" color:black" id="div_pre_moodboard_canvas" class="pasos letra-ml">',o+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',o+="4. DOCUMENTACIÓN <br/>",o+='<hr class="h3 barra" style="display:none"/>',o+="</div>"):(o+='<a class="documentacion" style="text-align:center"  href="javascript:completarPaso()" >',o+='<div <div class="pasos letra-ml colorDocumentacion" style=" color:grey" id="div_pre_moodboard_canvas">',o+='<div class="notificacionMenu" style="visibility:hidden"><img src="img/boton/notificacion.png" alt="Notificación"/></div><br/>',o+="4. DOCUMENTACIÓN <br/>",o+='<hr class="h3 barra" style="display:none"/>',o+="</div>"),o+="</a>",o+="</div>"}function savePaso1(a){0==a&&($(document.body).css({cursor:"wait"}),$("#cargando").modal("show")),estado=0==a?"true":"false";var o=proyectoObject.id,e=document.getElementById("habitacion_input").value,t=document.getElementById("en_mente_input").value,s=0;document.getElementById("cb1").checked&&(s=1);var r=0;document.getElementById("cb2").checked&&(r=1);var n=0;document.getElementById("cb3").checked&&(n=1);var i=0;document.getElementById("cb4").checked&&(i=1);var c=0;document.getElementById("cb5").checked&&(c=1);var l=0;document.getElementById("cb6").checked&&(l=1);var d=document.getElementById("inspiracion1_input").value,p=document.getElementById("inspiracion2_input").value,m=document.getElementById("inspiracion3_input").value,g=0;document.getElementById("usos1").checked&&(g=1);var u=0;document.getElementById("usos2").checked&&(u=1);var v=0;document.getElementById("usos3").checked&&(v=1);var b=0;document.getElementById("usos4").checked&&(b=1);var h=0;document.getElementById("usos5").checked&&(h=1);var f=0;document.getElementById("usos6").checked&&(f=1);var y=0;document.getElementById("asientos1").checked&&(y=1);var C=0;document.getElementById("asientos2").checked&&(C=1);var x=0;document.getElementById("asientos3").checked&&(x=1);var j=0;document.getElementById("asientos4").checked&&(j=1);var k=0;document.getElementById("asientos5").checked&&(k=1);var _=0;document.getElementById("asientos6").checked&&(_=1);var I=0;document.getElementById("auxiliares1").checked&&(I=1);var w=0;document.getElementById("auxiliares2").checked&&(w=1);var P=0;document.getElementById("auxiliares3").checked&&(P=1);var E=0;document.getElementById("auxiliares4").checked&&(E=1);var O=0;document.getElementById("auxiliares5").checked&&(O=1);var F=0;document.getElementById("almacenaje1").checked&&(F=1);var S=0;document.getElementById("almacenaje2").checked&&(S=1);var T=0;document.getElementById("almacenaje3").checked&&(T=1);var A=0;document.getElementById("almacenaje4").checked&&(A=1);var B=0;document.getElementById("almacenaje5").checked&&(B=1);var D=0;document.getElementById("deco1").checked&&(D=1);var M=0;document.getElementById("deco2").checked&&(M=1);var R=0;document.getElementById("deco3").checked&&(R=1);var N=0;document.getElementById("deco4").checked&&(N=1);var z=0;document.getElementById("deco5").checked&&(z=1);var L=document.getElementById("alguno_extra_input").value,U=document.getElementById("producto1_input").value,Y=document.getElementById("producto2_input").value,q=document.getElementById("producto3_input").value,H=document.getElementById("otra_necesidad_input").value,J=document.getElementById("diy1_input").value,V=document.getElementById("diy2_input").value,G=document.getElementById("diy3_input").value,X=0;document.getElementById("suelo_input").checked&&(X=1);var Z=0;document.getElementById("pintura_input").checked&&(Z=1);var K=document.getElementById("no_quieras_input").value,Q=document.getElementById("medidas_ancho_input").value,W=document.getElementById("medidas_alto_input").value,aa=document.getElementById("presupuesto_input").value;proyectoObject.preferencias[0].id_moodboard;try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/SetInformacion",data:{id_proyecto:o,habitacion:e,en_mente:t,prioridad_1:s,prioridad_2:r,prioridad_3:n,prioridad_4:i,prioridad_5:c,prioridad_6:l,inspiracion_1:d,inspiracion_2:p,inspiracion_3:m,usos_1:g,usos_2:u,usos_3:v,usos_4:b,usos_5:h,usos_6:f,asientos_1:y,asientos_2:C,asientos_3:x,asientos_4:j,asientos_5:k,asientos_6:_,auxiliares_1:I,auxiliares_2:w,auxiliares_3:P,auxiliares_4:E,auxiliares_5:O,almacenaje_1:F,almacenaje_2:S,almacenaje_3:T,almacenaje_4:A,almacenaje_5:B,deco_1:D,deco_2:M,deco_3:R,deco_4:N,deco_5:z,elementos_extra:L,imprescindibles_url_1:U,imprescindibles_url_2:Y,imprescindibles_url_3:q,otra_necesidad:H,diy_1:J,diy_2:V,diy_3:G,suelo:X,pintura:Z,no_quiero:K,medidas_ancho:Q,medidas_alto:W,presupuesto:aa,extra_otras_cosas:0,ventanas_1:0,ventanas_2:0,ventanas_3:0,cambio_estado:estado,mailDecorador:proyectoObject.uniqueDecorador,estado:proyectoObject.estado},contentType:"application/json; charset=utf-8",success:function(o){0!=o?($(document.body).css({cursor:"default"}),BootstrapDialog.alert("Hubo un problema al enviar los datos.",function(){cerrarCargando()})):($(document.body).css({cursor:"default"}),0==a&&11==proyectoObject.estado&&($(document.body).css({cursor:"default"}),cambiarEstado(0)),0==a&&11!=proyectoObject.estado&&($(document.body).css({cursor:"default"}),BootstrapDialog.alert("Datos actualizados correctamente.",function(){cerrarCargando(),subir()})))}})}catch(a){$(document.body).css({cursor:"default"}),BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor.",function(){cerrarCargando()})}}function cambiarEstado(a){var o=proyectoObject.id;if(0==a&&11==proyectoObject.estado)try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getState",id_proyecto:o},contentType:"application/json; charset=utf-8",success:function(a){isError(a)?($(document.body).css({cursor:"default"}),BootstrapDialog.alert(a,function(){cerrarCargando()})):($(document.body).css({cursor:"default"}),BootstrapDialog.confirm({title:".ADVERTENCIA.",message:"Paso completado correctamente, puedes seguir añadiendo información en este paso o ir al paso siguiente para concertar cita con el decorador.",type:BootstrapDialog.TYPE_PRIMARY,closable:!0,draggable:!0,btnCancelLabel:"Ir al paso siguiente",btnOKLabel:"Seguir en este paso!",callback:function(o){if(o){var e="";a.turnoDe,e+=a.texto_usuarios,$(".estado").attr("placeholder",e),$(".hablemos").attr("href","javascript:irPaso2()"),$(".colorHablemos").css("color","black"),cerrarCargando(),subir()}else{var t=urlbase+"/paso2.html";window.location=t}}}))}})}catch(a){$(document.body).css({cursor:"default"}),BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor.",function(){cerrarCargando()})}if("paso4"==a&&91==proyectoObject.estado)try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getState",id_proyecto:o},contentType:"application/json; charset=utf-8",success:function(a){isError(a)?($(document.body).css({cursor:"default"}),BootstrapDialog.alert(a,function(){cerrarCargando()})):($(document.body).css({cursor:"default"}),BootstrapDialog.confirm({title:".ADVERTENCIA.",message:"Proyecto finalizado, puede volver y revisar este proyecto cuando quiera.",type:BootstrapDialog.TYPE_PRIMARY,closable:!0,draggable:!0,btnCancelLabel:"Ir a lista de proyectos",btnOKLabel:"Seguir en este paso!",callback:function(o){if(o)$(".estado").attr("placeholder",a.texto_usuarios),cerrarCargando();else{var e=urlbase+"/Home.html";window.location=e}}}))}})}catch(a){$(document.body).css({cursor:"default"}),BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor.",function(){cerrarCargando()})}if(51==proyectoObject.estado||71==proyectoObject.estado)try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getState",id_proyecto:o},contentType:"application/json; charset=utf-8",success:function(o){if(isError(o))$(document.body).css({cursor:"default"}),BootstrapDialog.alert(o,function(){cerrarCargando()});else if("paso33D"==a&&71==proyectoObject.estado&&($(document.body).css({cursor:"default"}),BootstrapDialog.confirm({title:".ADVERTENCIA.",message:"Propuesta 3D aceptada. El decorador realizará los planos para esta propuesta.",type:BootstrapDialog.TYPE_PRIMARY,closable:!0,draggable:!0,btnCancelLabel:"Ir a lista de proyectos",btnOKLabel:"Seguir en este paso!",callback:function(a){if(a){var e="";o.turnoDe,e+=o.texto_usuarios,$(".estado").attr("placeholder",e),$(".documentacion").attr("href","javascript:irPaso4()"),$(".colorDocumentacion").css("color","black"),cerrarCargando()}else{var t=urlbase+"/Home.html";window.location=t}}})),a=51==proyectoObject.estado){var e="";e=1==proyectoObject.pagado?"Propuesta aceptada. El decorador trabajará en unas propuestas 3D acordes a esta propuesta.":"Propuesta aceptada. El decorador trabajará en los planos y lista de compra para esta propuesta.",$(document.body).css({cursor:"default"}),BootstrapDialog.confirm({title:".ADVERTENCIA.",message:e,type:BootstrapDialog.TYPE_PRIMARY,closable:!0,draggable:!0,btnCancelLabel:"Ir a lista de proyectos",btnOKLabel:"Seguir en este paso!",callback:function(a){if(a){var e="";o.turnoDe,e+=o.texto_usuarios,$(".estado").attr("placeholder",e),2==proyectoObject.pagado&&($(".documentacion").attr("href","javascript:irPaso4()"),$(".colorDocumentacion").css("color","black")),cerrarCargando()}else{var t=urlbase+"/Home.html";window.location=t}}})}}})}catch(a){$(document.body).css({cursor:"default"}),BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor.",function(){cerrarCargando()})}}function completarPaso(){BootstrapDialog.alert("Cuando finalice el paso actual se podrá acceder al siguiente paso")}function setFormularioPaso2(){if(proyectoObject.estado>30){var a="";a+='<div style="height:100%;padding:2%;background-color:rgba(255,255,255,0.7)">',a+='<h4 class="subtitulo_pantalla" style="margin-top:2%;margin-bottom:2%;">',a+='\t<p class="letra-s">YA SE HA CONCERTADO UNA CITA, REVISA TU CORREO ELECTRÓNICO.<BR/>SI NECESITAS CONTACTAR CON EL DECORADOR, UTILIZA EL CHAT DE ARRIBA</p>',a+="</h4>",a+="</div>",$(".paginaCita").html(a),$(".guardarCita").css("display","none")}else{var o=proyectoObject.cita;void 0!==o&&(document.getElementById("dateInputforCita").value=o.fecha,document.getElementById("timeInputforCita").value=o.hora,1==o.skype?document.getElementById("skypeInputforCita").checked=!0:document.getElementById("telefonoInputforCita").checked=!0,document.getElementById("contenidoInputforCita").value=o.contenido)}}function setFormularioPaso1(){var a=proyectoObject.informacion;void 0!==a?(cargarDropzonePlanos(!1),document.getElementById("habitacion_input").value=a.habitacion,document.getElementById("en_mente_input").value=a.en_mente,document.getElementById("cb1").checked=a.prioridad_1,document.getElementById("cb2").checked=a.prioridad_2,document.getElementById("cb3").checked=a.prioridad_3,document.getElementById("cb4").checked=a.prioridad_4,document.getElementById("cb5").checked=a.prioridad_5,document.getElementById("cb6").checked=a.prioridad_6,document.getElementById("inspiracion1_input").value=a.inspiracion_1,document.getElementById("inspiracion2_input").value=a.inspiracion_2,document.getElementById("inspiracion3_input").value=a.inspiracion_3,document.getElementById("usos1").checked=a.usos_1,document.getElementById("usos2").checked=a.usos_2,document.getElementById("usos3").checked=a.usos_3,document.getElementById("usos4").checked=a.usos_4,document.getElementById("usos5").checked=a.usos_5,document.getElementById("usos6").checked=a.usos_6,document.getElementById("asientos1").checked=a.asientos_1,document.getElementById("asientos2").checked=a.asientos_2,document.getElementById("asientos3").checked=a.asientos_3,document.getElementById("asientos4").checked=a.asientos_4,document.getElementById("asientos5").checked=a.asientos_5,document.getElementById("asientos6").checked=a.asientos_6,document.getElementById("auxiliares1").checked=a.auxiliares_1,document.getElementById("auxiliares2").checked=a.auxiliares_2,document.getElementById("auxiliares3").checked=a.auxiliares_3,document.getElementById("auxiliares4").checked=a.auxiliares_4,document.getElementById("auxiliares5").checked=a.auxiliares_5,document.getElementById("almacenaje1").checked=a.almacenaje_1,document.getElementById("almacenaje2").checked=a.almacenaje_2,document.getElementById("almacenaje3").checked=a.almacenaje_3,document.getElementById("almacenaje4").checked=a.almacenaje_4,document.getElementById("almacenaje5").checked=a.almacenaje_5,document.getElementById("deco1").checked=a.deco_1,document.getElementById("deco2").checked=a.deco_2,document.getElementById("deco3").checked=a.deco_3,document.getElementById("deco4").checked=a.deco_4,document.getElementById("deco5").checked=a.deco_5,document.getElementById("alguno_extra_input").value=a.elementos_extra,document.getElementById("producto1_input").value=a.imprescindibles_url_1,document.getElementById("producto2_input").value=a.imprescindibles_url_2,document.getElementById("producto3_input").value=a.imprescindibles_url_3,document.getElementById("otra_necesidad_input").value=a.otra_necesidad,document.getElementById("diy1_input").value=a.diy_1,document.getElementById("diy2_input").value=a.diy_2,document.getElementById("diy3_input").value=a.diy_3,document.getElementById("suelo_input").checked=a.suelo,document.getElementById("pintura_input").checked=a.pintura,document.getElementById("no_quieras_input").value=a.no_quiero,document.getElementById("medidas_ancho_input").value=a.medidas_ancho,document.getElementById("medidas_alto_input").value=a.medidas_alto,document.getElementById("presupuesto_input").value=a.presupuesto):cargarDropzonePlanos(!0)}function closemodalpasos(){$("#modalforpopups").modal("hide"),setTimeout(function(){pagarfunction()},500)}function deleteFile(a,o){var e=getCookie("userAssistant"),t=proyectoObject.nombreProyecto,s=a,o=o;try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/RemoveFile",data:{user:e,proyecto:t,seccion:s,fichero:o},contentType:"application/json; charset=utf-8",success:function(a){}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}function deleteFile2(a,o,e){var t=getCookie("userAssistant"),s=a,e=e;try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/RemoveFile",data:{user:t,proyecto:o,seccion:s,fichero:e},contentType:"application/json; charset=utf-8",success:function(a){}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}function deleteFileCTM(a,o,e,t){var a=a,s=o,r=e,t=t;try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/RemoveFile",data:{user:a,proyecto:s,seccion:r,fichero:t},contentType:"application/json; charset=utf-8",success:function(a){}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}function getToday(){var a=new Date,o=a.getDate(),e=a.getMonth()+1,t=a.getFullYear();o<10&&(o="0"+o),e<10&&(e="0"+e),a=e+"/"+o+"/"+t}function dudasfunction(){$(".modal").modal("hide"),setTimeout(function(){elrestodedudas()},500)}function elrestodedudas(){""==getCookie("userAssistant")?$("#modalforDudasSin").modal("show"):$("#modalforDudasCon").modal("show")}function pagarfunction(){$("#modalforpagar").modal("show")}function closemodaltoopcionespagar(){$(".modal").modal("hide"),setTimeout(function(){opcionespagarfunction()},500)}function opcionespagarfunction(){$("#modalopcionesdepago").modal("show")}function opcionespagar(a){""==getCookie("userAssistant")?(setCookie("nuevo_Proyecto","1",365),$("#login-modal").modal("show"),setCookie("pagar",a,365)):(79==a&&$("#modalopcionesdepago79").modal("show"),179==a&&$("#modalopcionesdepago179").modal("show"))}function pagar(a,o){$(document.body).css({cursor:"wait"}),id_proyecto=proyectoObject.id;var e=getCookie("userAssistant");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/SetPago",data:{codigo:a,tipo:o,id_proyecto:id_proyecto,mail:e},contentType:"application/json; charset=utf-8",success:function(a){"0"==a?($("#modalopcionesdepago79").modal("hide"),$("#modalopcionesdepago179").modal("hide"),setTimeout(function(){$(document.body).css({cursor:"default"}),BootstrapDialog.alert("Muchas gracias, PAGO COMPLETADO CORRECTAMENTE",function(){var a=urlbase+"/Home.html";window.location=a})},1500)):($("#modalopcionesdepago79").modal("hide"),$("#modalopcionesdepago179").modal("hide"),setTimeout(function(){$(document.body).css({cursor:"default"}),BootstrapDialog.alert("Algo no ha salido bien con el pago, por favor contacte con un administrador en info@decotheco.com",function(){setTimeout(function(){$("#modalopcionesdepago79").modal("show"),$("#modalopcionesdepago179").modal("show")},1e3)})},1500))}})}catch(a){$(document.body).css({cursor:"default"}),BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}function comprarProyecto(a){setCookie("id_proyectoglobal",a,365);var o=urlbase+"/Pagar.html";window.location=o}function pagarConCodigo(){$(document.body).css({cursor:"wait"});var a=proyectoObject.id,o=getCookie("userAssistant"),e=document.getElementById("codigo_pago_input2").value;if(""!=e)try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/SetPagoConCodigo",data:{codigo:e,id_proyecto:a,mail:o},contentType:"application/json; charset=utf-8",success:function(a){"0"==a?($("#modalopcionesdepago179").modal("hide"),$(document.body).css({cursor:"default"}),BootstrapDialog.alert("Muchas gracias, PAGO COMPLETADO CORRECTAMENTE",function(){var a=urlbase+"/Home.html";window.location=a})):($(".error").html("El código ya se utilizó, si continúas teniendo problemas ponte en contacto a través del formulario de dudas."),$(document.body).css({cursor:"default"}))}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),$(document.body).css({cursor:"default"})}else $(".error").html("Por favor, introduce un codigo valido "+codigo)}function sendMail(){var a,o=proyectoObject.uniqueDecorador,e=document.getElementById("dateInputforCita"),t=document.getElementById("timeInputforCita"),s=document.getElementById("skypeInputforCita"),r=document.getElementById("contenidoInputforCita"),n="Este mensaje ha sido generado de forma automática por decoración-online.decotheco.com.\nPor favor, recuerde que nos pondremos en contacto con usted el día "+e.value+" a las "+t.value;s.checked?(a=1,n+=", por skype ("+r.value+")."):(a=0,n+=", por teléfono ("+r.value+")."),n+="\n:)";var i=proyectoObject.id;try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/SendCita",data:{toMail:o,content:n,contenido:document.getElementById("contenidoInputforCita").value,fecha:e.value,hora:t.value,skype:a,id_proyecto:i},contentType:"application/json; charset=utf-8",success:function(a){0==a?($(document.body).css({cursor:"default"}),BootstrapDialog.alert("Se ha concertado una cita correctamente. Te enviaremos un email cuando el decorador acepte o rechace la cita. En caso de ser rechazada se concertará una nueva cita mediante el chat de arriba.",function(){var a=urlbase+"/Home.html";cerrarCargando(),window.location=a})):($(document.body).css({cursor:"default"}),BootstrapDialog.alert("No se pudo concertar la cita.",function(){cerrarCargando()}))}})}catch(a){$(document.body).css({cursor:"default"}),BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor.",function(){cerrarCargando()})}}function sendDudas(){$(".modal").modal("hide"),$(document.body).css({cursor:"wait"});var a,o,e=getCookie("userAssistant");""!=e?(a=e,o=$("li[id=liforsustitution] > a").text()+" (registrado) "):(a=document.getElementById("dudas_mail").value,o=document.getElementById("dudas_nombre").value);var t=document.getElementById("dudas_consultaCon").value+document.getElementById("dudas_consulta").value,s="Nos han escrito desde: "+paracortar+"\nEl nombre es: "+o+" y dice esto: "+t;s+="\n:)",setTimeout(function(){$("#cargando").modal("show")},500);try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/SendMail",data:{toMail:"info@decotheco.com",fromMail:a,subject:"Mensaje de dudas de decoracion-online",content:s},contentType:"application/json; charset=utf-8",success:function(a){"-1"!=a?($(document.body).css({cursor:"default"}),BootstrapDialog.alert("Mensaje enviado correctamente, en breve nos pondremos en contacto contigo :)",function(){cerrarCargando()})):($(document.body).css({cursor:"default"}),BootstrapDialog.alert("No se ha podido enviar el mensaje.",function(){cerrarCargando()}))}})}catch(a){$(document.body).css({cursor:"default"}),BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor.",function(){cerrarCargando()})}}function savePaso2(){$(document.body).css({cursor:"wait"}),$("#cargando").modal("show");var a=document.getElementById("dateInputforCita"),o=document.getElementById("timeInputforCita"),e=document.getElementById("skypeInputforCita"),t=document.getElementById("telefonoInputforCita"),s=document.getElementById("contenidoInputforCita");""!=a.value?""!=o.value?e.checked||t.checked?""!=s.value?sendMail():BootstrapDialog.alert("Por favor introduzca un dato de contacto.",function(){cerrarCargando(),$(document.body).css({cursor:"default"})}):BootstrapDialog.alert("Por favor seleccione la forma de contacto.",function(){cerrarCargando(),$(document.body).css({cursor:"default"})}):BootstrapDialog.alert("Por favor introduzca una hora",function(){cerrarCargando(),$(document.body).css({cursor:"default"})}):BootstrapDialog.alert("Por favor introduzca una fecha",function(){cerrarCargando(),$(document.body).css({cursor:"default"})})}function setPropuestas(){var a=!1,o=getCookie("userAssistant"),e=proyectoObject.nombreProyecto,t=proyectoObject.propuestas,s=urlbaseForMoodboards+"/usuarios/"+o+"/"+e+"/propuestas/";if(proyectoObject.estado<=40){var r="";r+='<div style="height:100%;padding:2%;background-color:rgba(255,255,255,0.7)">',r+='<h4 class="subtitulo_pantalla" style="margin-top:2%;margin-bottom:2%;">',r+='\t<p class="letra-s">UNA VEZ QUE HEMOS HABLADO Y ESTABLECIDO LAS BASES DEL DISEÑO, NOS TOCA PONERNOS A TRABAJAR. TENDREMOS UN MÁXIMO DE 10 DÍAS PARA <br/>',r+="\tHACERTE LLEGAR LA PRIMERA PROPUESTA. COMO YA SABES, SERÁN UN TOTAL DE 2 DISEÑOS, PARA QUE PUEDAS <br/>",r+="\tHACERTE UNA IDEA MUY COMPLETA DE LO QUE TE PROPONEMOS</p>",r+="</h4>",r+="</div>",$(".propuesta1").html(r),$(".propuesta2").html(r)}else{if(proyectoObject.estado>51&&"0"!=proyectoObject.paso3Propuestas?"2"==proyectoObject.paso3Propuestas?($(".propuesta1").css("display","inline"),$(".propuesta2").css("display","none"),$(".barra4").css("display","none"),$(".barra3").css("display","block"),$(".pag1a").css("display","none"),$(".pag2d").css("display","inline"),$(".aceptarPropuesta").html("PROPUESTA ACEPTADA"),$(".aceptarPropuesta2").html("PROPUESTA NO ACEPTADA"),$(".aceptarPropuesta").attr("onclick",""),$(".aceptarPropuesta2").attr("onclick","")):($(".propuesta1").css("display","none"),$(".propuesta2").css("display","inline"),$(".barra4").css("display","block"),$(".barra3").css("display","none"),$(".pag1a").css("display","inline"),$(".pag2d").css("display","none"),$(".aceptarPropuesta2").html("PROPUESTA ACEPTADA"),$(".aceptarPropuesta").html("PROPUESTA NO ACEPTADA"),$(".aceptarPropuesta").attr("onclick",""),$(".aceptarPropuesta2").attr("onclick","")):proyectoObject.estado>71&&($(".aceptarPropuesta").css("display","none"),$(".aceptarPropuesta2").css("display","none"),$(".aceptarPropuesta3d1").css("display","none"),$(".aceptarPropuesta3d2").css("display","none"),$(".propTit").css("display","none"),$(".propTit2").css("display","none")),0==proyectoObject.ldlcs.length);else if(1==proyectoObject.ldlcs.length){if(2==proyectoObject.ldlcs[0].Estado||4==proyectoObject.ldlcs[0].Estado){$("#imagen1").css("display","none");n=proyectoObject.ldlcs[0].ListaCompra_id;try{console.log(n),console.log(urlbaseForAjax+"/DecoradoresController"),$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getLdlc",id_ldlc:n},contentType:"application/json; charset=utf-8",success:function(a){if(console.log(a),isError(a)){$(document.body).css({cursor:"default"});var o=urlbase;window.location=o}else{$(document.body).css({cursor:"default"});var e=a,t=$(window).height(),s=($(window).width(),t-50);canvas111=new fabric.StaticCanvas("canvas111");var r=JSON.parse(e.Canvas);console.log(r.objects),json=JSON.stringify(r),anchoCanvasFinal=0,altoCanvasFinal=0;var n=0,c=0;for(minLeftFinal1=1e5,minTopFinal1=1e5,i=0;i<r.objects.length;i++){tope=r.objects[i].top,altura=r.objects[i].height,n=r.objects[i].left,c=r.objects[i].width,scala=r.objects[i].scaleX,scalaY=r.objects[i].scaleY;var l=altura*scalaY*.5,d=c*scala*.5,p=altura*scalaY*.75,m=c*scala*.75;minTop=tope,minLeft=n,r.objects[i].angle>=10&&r.objects[i].angle<=45?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=n+d):r.objects[i].angle>45&&r.objects[i].angle<=90?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=n,anchoCanvas-=50):r.objects[i].angle>90&&r.objects[i].angle<=130?(console.log(">90"),altoCanvasImg=tope+p,altoCanvasImg=altoCanvasImg,anchoCanvas=n-d,anchoCanvas+=75):r.objects[i].angle>130&&r.objects[i].angle<=160?(console.log(">130"),altoCanvasImg=tope+l,anchoCanvas=n-d,anchoCanvas+=50):r.objects[i].angle>160&&r.objects[i].angle<=180?(console.log(">160"),altoCanvasImg=tope+40,anchoCanvas=n-d,anchoCanvas+=70):r.objects[i].angle>180&&r.objects[i].angle<=210?(console.log(">180"),altoCanvasImg=tope,anchoCanvas=n,anchoCanvas+=20):r.objects[i].angle>210&&r.objects[i].angle<=240?(console.log(">210"),altoCanvasImg=tope-15,anchoCanvas=n+d):r.objects[i].angle>240&&r.objects[i].angle<=260?(console.log(">240"),altoCanvasImg=tope-15,anchoCanvas=n+m+40):r.objects[i].angle>260&&r.objects[i].angle<=305?(console.log(">260"),altoCanvasImg=tope+30,anchoCanvas=n+m+100):r.objects[i].angle>305&&r.objects[i].angle<=325?(console.log(">305"),altoCanvasImg=tope+l,anchoCanvas=n+m+130):r.objects[i].angle>325&&r.objects[i].angle<=350?(console.log(">325"),altoCanvasImg=tope+p,anchoCanvas=n+m+130):(altoCanvasImg=tope+altura*scalaY,anchoCanvas=n+c*scala),tope<9e4&&n<9e4&&r.objects[i].visible&&(minTop<minTopFinal1&&(minTopFinal1=minTop),minLeft<minLeftFinal1&&(minLeftFinal1=minLeft),anchoCanvas>anchoCanvasFinal&&(anchoCanvasFinal=anchoCanvas),altoCanvasImg>altoCanvasFinal&&(altoCanvasFinal=altoCanvasImg))}restar11=minTopFinal1-50,restar111=minLeftFinal1-50,restarR11=restar11,restarR111=restar111,s=s,restar11>0?altoCanvasFinal1=altoCanvasFinal+50:(altoCanvasFinal+=50,altoCanvasFinal1=altoCanvasFinal+50),restar111>0?anchoCanvasFinal1=anchoCanvasFinal:(anchoCanvasFinal+=50,anchoCanvasFinal1=anchoCanvasFinal),anchoPantalla=$("#anchoCanvas").width();var g=anchoPantalla/anchoCanvasFinal;for(altoCanvasFinalImg=altoCanvasFinal*g,i=0;i<r.objects.length;i++)topObj=r.objects[i].top,leftObj=r.objects[i].left,restar111,r.objects[i].left=leftObj-restar111,restar11>0?r.objects[i].top=topObj-restar11:r.objects[i].top=topObj+restar11+50;canvas111.renderAll(),json=JSON.stringify(r),null!=json&&canvas111.loadFromJSON(json,function(){zoomIt(canvas111,g),canvas111.renderAll()}),restar11=restar11*g-50,restar111=restar111*g-50,$("#canvas111").attr("width",anchoPantalla),restar111>0?$("#canvas111").css("width",anchoPantalla+restar111):$("#canvas111").css("width",anchoPantalla+restar111+50),restar11>0?$("#canvas111").attr("height",altoCanvasFinalImg-restar11):$("#canvas111").attr("height",altoCanvasFinalImg+restar11+50),$(".upper-canvas").attr("width",anchoPantalla),$(".canvas-container").attr("width",anchoPantalla),$(".upper-canvas").css("width",anchoPantalla),$(".canvas-container").css("width",anchoPantalla),$("#canvas111").css("height","auto"),$(".upper-canvas").attr("height",altoCanvasFinalImg),$(".canvas-container").attr("height",altoCanvasFinalImg),$(".upper-canvas").css("height",altoCanvasFinalImg),$(".canvas-container").css("height",altoCanvasFinalImg),canvas111.getContext("2d").restore(),canvas111.calcOffset(),canvas111.renderAll(),canvas111.forEachObject(function(a){a.hasBorders=a.hasControls=!1}),html="",html+='<div style="position:absolute;bottom:15px;right:20px;cursor:pointer" onclick="ampliar(1)" style="text-align: center; display: inline;"><img src="img/pasos/ampliar.png"  style="width:30px"alt="Ampliar imagen" title="Ampliar imagen"></div>',$("#ldlc-image111").append(html)}}})}catch(a){console.log("Se ha producido un error en la conexión con el servidor"),$(document.body).css({cursor:"default"})}}else if(3==proyectoObject.ldlcs[0].Estado||5==proyectoObject.ldlcs[0].Estado){$("#imagen2").css("display","none");c=proyectoObject.ldlcs[0].ListaCompra_id;try{$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getLdlc",id_ldlc:c},contentType:"application/json; charset=utf-8",success:function(a){if(console.log(a),isError(a)){$(document.body).css({cursor:"default"});var o=urlbase;window.location=o}else{$(document.body).css({cursor:"default"});var e=a,t=$(window).height()-50;canvas222=new fabric.StaticCanvas("canvas222");var s=JSON.parse(e.Canvas);json2=JSON.stringify(s),anchoCanvasFinal=0,altoCanvasFinal=0;var r=0,n=0;for(minLeftFinal=1e5,minTopFinal=1e5,i=0;i<s.objects.length;i++){tope=s.objects[i].top,altura=s.objects[i].height,r=s.objects[i].left,n=s.objects[i].width,scala=s.objects[i].scaleX,scalaY=s.objects[i].scaleY;var c=altura*scalaY*.5,l=n*scala*.5,d=altura*scalaY*.75,p=n*scala*.75;minTop=tope,minLeft=r,s.objects[i].angle>=10&&s.objects[i].angle<=45?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=r+l):s.objects[i].angle>45&&s.objects[i].angle<=90?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=r,anchoCanvas-=50):s.objects[i].angle>90&&s.objects[i].angle<=130?(console.log(">90"),altoCanvasImg=tope+d,altoCanvasImg=altoCanvasImg,anchoCanvas=r-l,anchoCanvas+=75):s.objects[i].angle>130&&s.objects[i].angle<=160?(console.log(">130"),altoCanvasImg=tope+c,anchoCanvas=r-l,anchoCanvas+=50):s.objects[i].angle>160&&s.objects[i].angle<=180?(console.log(">160"),altoCanvasImg=tope+40,anchoCanvas=r-l,anchoCanvas+=70):s.objects[i].angle>180&&s.objects[i].angle<=210?(console.log(">180"),altoCanvasImg=tope,anchoCanvas=r,anchoCanvas+=20):s.objects[i].angle>210&&s.objects[i].angle<=240?(console.log(">210"),altoCanvasImg=tope-15,anchoCanvas=r+l):s.objects[i].angle>240&&s.objects[i].angle<=260?(console.log(">240"),altoCanvasImg=tope-15,anchoCanvas=r+p+40):s.objects[i].angle>260&&s.objects[i].angle<=305?(console.log(">260"),altoCanvasImg=tope+30,anchoCanvas=r+p+100):s.objects[i].angle>305&&s.objects[i].angle<=325?(console.log(">305"),altoCanvasImg=tope+c,anchoCanvas=r+p+130):s.objects[i].angle>325&&s.objects[i].angle<=350?(console.log(">325"),altoCanvasImg=tope+d,anchoCanvas=r+p+130):(altoCanvasImg=tope+altura*scalaY,anchoCanvas=r+n*scala),tope<9e4&&r<9e4&&s.objects[i].visible&&(minTop<minTopFinal&&(minTopFinal=minTop),minLeft<minLeftFinal&&(minLeftFinal=minLeft),anchoCanvas>anchoCanvasFinal&&(anchoCanvasFinal=anchoCanvas),altoCanvasImg>altoCanvasFinal&&(altoCanvasFinal=altoCanvasImg))}restar22=minTopFinal-50,restar222=minLeftFinal-50,restarR22=restar22,restarR222=restar222,t=t,anchoCanvasFinal=anchoCanvasFinal,restar22>0?altoCanvasFinal2=altoCanvasFinal+50:(altoCanvasFinal+=50,altoCanvasFinal2=altoCanvasFinal+50),restar222>0?anchoCanvasFinal=anchoCanvasFinal:(anchoCanvasFinal+=50,anchoCanvasFinal=anchoCanvasFinal),anchoCanvasFinal2=anchoCanvasFinal,anchoPantalla=$("#anchoCanvas2").width();var m=anchoPantalla/anchoCanvasFinal;for(altoCanvasFinalImg2=altoCanvasFinal*m,i=0;i<s.objects.length;i++)topObj=s.objects[i].top,leftObj=s.objects[i].left,restar222,s.objects[i].left=leftObj-restar222,restar22>0?s.objects[i].top=topObj-restar22:s.objects[i].top=topObj+restar22+50;canvas222.renderAll(),json2=JSON.stringify(s),null!=json2&&canvas222.loadFromJSON(json2,function(){zoomIt(canvas222,m),canvas222.renderAll()}),restar22=restar22*m-50*m,restar222=restar222*m-50*m,$("#canvas222").attr("width",anchoPantalla),restar222>0?$("#canvas222").css("width",anchoPantalla+restar222):$("#canvas222").css("width",anchoPantalla+restar222+50*m),restar22>0?$("#canvas222").attr("height",altoCanvasFinalImg2-restar22):$("#canvas222").attr("height",altoCanvasFinalImg2+restar22+50*m),$(".upper-canvas").attr("width",anchoPantalla),$(".canvas-container").attr("width",anchoPantalla),$(".upper-canvas").css("width",anchoPantalla),$(".canvas-container").css("width",anchoPantalla),$("#canvas222").css("height","auto"),$(".upper-canvas").attr("height",altoCanvasFinalImg2),$(".canvas-container").attr("height",altoCanvasFinalImg2),$(".upper-canvas").css("height",altoCanvasFinalImg2),$(".canvas-container").css("height",altoCanvasFinalImg2),canvas222.getContext("2d").restore(),canvas222.calcOffset(),canvas222.renderAll(),canvas222.forEachObject(function(a){a.hasBorders=a.hasControls=!1}),html="",html+='<div style="position:absolute;bottom:15px;right:20px;cursor:pointer" onclick="ampliar(2)" style="text-align: center; display: inline;"><img src="img/pasos/ampliar.png"  style="width:30px"alt="Ampliar imagen" title="Ampliar imagen"></div>',$("#ldlc-image222").append(html)}}})}catch(a){console.log("Se ha producido un error en la conexión con el servidor"),$(document.body).css({cursor:"default"})}}}else if(2==proyectoObject.ldlcs.length){if(2==proyectoObject.ldlcs[0].Estado||4==proyectoObject.ldlcs[0].Estado){$("#imagen1").css("display","none");n=proyectoObject.ldlcs[0].ListaCompra_id;try{$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getLdlc",id_ldlc:n},contentType:"application/json; charset=utf-8",success:function(a){if(console.log(a),isError(a)){$(document.body).css({cursor:"default"});var o=urlbase;window.location=o}else{$(document.body).css({cursor:"default"});var e=a,t=$(window).height(),s=($(window).width(),t-50);canvas111=new fabric.StaticCanvas("canvas111");var r=JSON.parse(e.Canvas);console.log(r.objects),json=JSON.stringify(r),anchoCanvasFinal=0,altoCanvasFinal=0;var n=0,c=0;for(minLeftFinal1=1e5,minTopFinal1=1e5,i=0;i<r.objects.length;i++){tope=r.objects[i].top,altura=r.objects[i].height,n=r.objects[i].left,c=r.objects[i].width,scala=r.objects[i].scaleX,scalaY=r.objects[i].scaleY;var l=altura*scalaY*.5,d=c*scala*.5,p=altura*scalaY*.75,m=c*scala*.75;minTop=tope,minLeft=n,r.objects[i].angle>=10&&r.objects[i].angle<=45?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=n+d):r.objects[i].angle>45&&r.objects[i].angle<=90?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=n,anchoCanvas-=50):r.objects[i].angle>90&&r.objects[i].angle<=130?(console.log(">90"),altoCanvasImg=tope+p,altoCanvasImg=altoCanvasImg,anchoCanvas=n-d,anchoCanvas+=75):r.objects[i].angle>130&&r.objects[i].angle<=160?(console.log(">130"),altoCanvasImg=tope+l,anchoCanvas=n-d,anchoCanvas+=50):r.objects[i].angle>160&&r.objects[i].angle<=180?(console.log(">160"),altoCanvasImg=tope+40,anchoCanvas=n-d,anchoCanvas+=70):r.objects[i].angle>180&&r.objects[i].angle<=210?(console.log(">180"),altoCanvasImg=tope,anchoCanvas=n,anchoCanvas+=20):r.objects[i].angle>210&&r.objects[i].angle<=240?(console.log(">210"),altoCanvasImg=tope-15,anchoCanvas=n+d):r.objects[i].angle>240&&r.objects[i].angle<=260?(console.log(">240"),altoCanvasImg=tope-15,anchoCanvas=n+m+40):r.objects[i].angle>260&&r.objects[i].angle<=305?(console.log(">260"),altoCanvasImg=tope+30,anchoCanvas=n+m+100):r.objects[i].angle>305&&r.objects[i].angle<=325?(console.log(">305"),altoCanvasImg=tope+l,anchoCanvas=n+m+130):r.objects[i].angle>325&&r.objects[i].angle<=350?(console.log(">325"),altoCanvasImg=tope+p,anchoCanvas=n+m+130):(altoCanvasImg=tope+altura*scalaY,anchoCanvas=n+c*scala),tope<9e4&&n<9e4&&r.objects[i].visible&&(minTop<minTopFinal1&&(minTopFinal1=minTop),minLeft<minLeftFinal1&&(minLeftFinal1=minLeft),anchoCanvas>anchoCanvasFinal&&(anchoCanvasFinal=anchoCanvas),altoCanvasImg>altoCanvasFinal&&(altoCanvasFinal=altoCanvasImg))}restar11=minTopFinal1-50,restar111=minLeftFinal1-50,restarR11=restar11,restarR111=restar111,s=s,restar11>0?altoCanvasFinal1=altoCanvasFinal+50:(altoCanvasFinal+=50,altoCanvasFinal1=altoCanvasFinal+50),restar111>0?anchoCanvasFinal1=anchoCanvasFinal:(anchoCanvasFinal+=50,anchoCanvasFinal1=anchoCanvasFinal),anchoPantalla=$("#anchoCanvas").width();var g=anchoPantalla/anchoCanvasFinal;for(altoCanvasFinalImg=altoCanvasFinal*g,i=0;i<r.objects.length;i++)topObj=r.objects[i].top,leftObj=r.objects[i].left,restar111,r.objects[i].left=leftObj-restar111,restar11>0?r.objects[i].top=topObj-restar11:r.objects[i].top=topObj+restar11+50;canvas111.renderAll(),json=JSON.stringify(r),null!=json&&canvas111.loadFromJSON(json,function(){zoomIt(canvas111,g),canvas111.renderAll()}),restar11=restar11*g-50,restar111=restar111*g-50,$("#canvas111").attr("width",anchoPantalla),restar111>0?$("#canvas111").css("width",anchoPantalla+restar111):$("#canvas111").css("width",anchoPantalla+restar111+50),restar11>0?$("#canvas111").attr("height",altoCanvasFinalImg-restar11):$("#canvas111").attr("height",altoCanvasFinalImg+restar11+50),$(".upper-canvas").attr("width",anchoPantalla),$(".canvas-container").attr("width",anchoPantalla),$(".upper-canvas").css("width",anchoPantalla),$(".canvas-container").css("width",anchoPantalla),$("#canvas111").css("height","auto"),$(".upper-canvas").attr("height",altoCanvasFinalImg),$(".canvas-container").attr("height",altoCanvasFinalImg),$(".upper-canvas").css("height",altoCanvasFinalImg),$(".canvas-container").css("height",altoCanvasFinalImg),canvas111.getContext("2d").restore(),canvas111.calcOffset(),canvas111.renderAll(),canvas111.forEachObject(function(a){a.hasBorders=a.hasControls=!1}),html="",html+='<div style="position:absolute;bottom:15px;right:20px;cursor:pointer" onclick="ampliar(1)" style="text-align: center; display: inline;"><img src="img/pasos/ampliar.png"  style="width:30px"alt="Ampliar imagen" title="Ampliar imagen"></div>',$("#ldlc-image111").append(html)}}})}catch(a){console.log("Se ha producido un error en la conexión con el servidor"),$(document.body).css({cursor:"default"})}}if(3==proyectoObject.ldlcs[0].Estado||5==proyectoObject.ldlcs[0].Estado){$("#imagen2").css("display","none");c=proyectoObject.ldlcs[0].ListaCompra_id;try{$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getLdlc",id_ldlc:c},contentType:"application/json; charset=utf-8",success:function(a){if(console.log(a),isError(a)){$(document.body).css({cursor:"default"});var o=urlbase;window.location=o}else{$(document.body).css({cursor:"default"});var e=a,t=$(window).height()-50;canvas222=new fabric.StaticCanvas("canvas222");var s=JSON.parse(e.Canvas);json2=JSON.stringify(s),anchoCanvasFinal=0,altoCanvasFinal=0;var r=0,n=0;for(minLeftFinal=1e5,minTopFinal=1e5,i=0;i<s.objects.length;i++){tope=s.objects[i].top,altura=s.objects[i].height,r=s.objects[i].left,n=s.objects[i].width,scala=s.objects[i].scaleX,scalaY=s.objects[i].scaleY;var c=altura*scalaY*.5,l=n*scala*.5,d=altura*scalaY*.75,p=n*scala*.75;minTop=tope,minLeft=r,s.objects[i].angle>=10&&s.objects[i].angle<=45?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=r+l):s.objects[i].angle>45&&s.objects[i].angle<=90?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=r,anchoCanvas-=50):s.objects[i].angle>90&&s.objects[i].angle<=130?(console.log(">90"),altoCanvasImg=tope+d,altoCanvasImg=altoCanvasImg,anchoCanvas=r-l,anchoCanvas+=75):s.objects[i].angle>130&&s.objects[i].angle<=160?(console.log(">130"),altoCanvasImg=tope+c,anchoCanvas=r-l,anchoCanvas+=50):s.objects[i].angle>160&&s.objects[i].angle<=180?(console.log(">160"),altoCanvasImg=tope+40,anchoCanvas=r-l,anchoCanvas+=70):s.objects[i].angle>180&&s.objects[i].angle<=210?(console.log(">180"),altoCanvasImg=tope,anchoCanvas=r,anchoCanvas+=20):s.objects[i].angle>210&&s.objects[i].angle<=240?(console.log(">210"),altoCanvasImg=tope-15,anchoCanvas=r+l):s.objects[i].angle>240&&s.objects[i].angle<=260?(console.log(">240"),altoCanvasImg=tope-15,anchoCanvas=r+p+40):s.objects[i].angle>260&&s.objects[i].angle<=305?(console.log(">260"),altoCanvasImg=tope+30,anchoCanvas=r+p+100):s.objects[i].angle>305&&s.objects[i].angle<=325?(console.log(">305"),altoCanvasImg=tope+c,anchoCanvas=r+p+130):s.objects[i].angle>325&&s.objects[i].angle<=350?(console.log(">325"),altoCanvasImg=tope+d,anchoCanvas=r+p+130):(altoCanvasImg=tope+altura*scalaY,anchoCanvas=r+n*scala),tope<9e4&&r<9e4&&s.objects[i].visible&&(minTop<minTopFinal&&(minTopFinal=minTop),minLeft<minLeftFinal&&(minLeftFinal=minLeft),anchoCanvas>anchoCanvasFinal&&(anchoCanvasFinal=anchoCanvas),altoCanvasImg>altoCanvasFinal&&(altoCanvasFinal=altoCanvasImg))}restar22=minTopFinal-50,restar222=minLeftFinal-50,restarR22=restar22,restarR222=restar222,t=t,anchoCanvasFinal=anchoCanvasFinal,restar22>0?altoCanvasFinal2=altoCanvasFinal+50:(altoCanvasFinal+=50,altoCanvasFinal2=altoCanvasFinal+50),restar222>0?anchoCanvasFinal=anchoCanvasFinal:(anchoCanvasFinal+=50,anchoCanvasFinal=anchoCanvasFinal),anchoCanvasFinal2=anchoCanvasFinal,anchoPantalla=$("#anchoCanvas2").width();var m=anchoPantalla/anchoCanvasFinal;for(altoCanvasFinalImg2=altoCanvasFinal*m,i=0;i<s.objects.length;i++)topObj=s.objects[i].top,leftObj=s.objects[i].left,restar222,s.objects[i].left=leftObj-restar222,restar22>0?s.objects[i].top=topObj-restar22:s.objects[i].top=topObj+restar22+50;canvas222.renderAll(),json2=JSON.stringify(s),null!=json2&&canvas222.loadFromJSON(json2,function(){zoomIt(canvas222,m),canvas222.renderAll()}),restar22=restar22*m-50*m,restar222=restar222*m-50*m,$("#canvas222").attr("width",anchoPantalla),restar222>0?$("#canvas222").css("width",anchoPantalla+restar222):$("#canvas222").css("width",anchoPantalla+restar222+50*m),restar22>0?$("#canvas222").attr("height",altoCanvasFinalImg2-restar22):$("#canvas222").attr("height",altoCanvasFinalImg2+restar22+50*m),$(".upper-canvas").attr("width",anchoPantalla),$(".canvas-container").attr("width",anchoPantalla),$(".upper-canvas").css("width",anchoPantalla),$(".canvas-container").css("width",anchoPantalla),$("#canvas222").css("height","auto"),$(".upper-canvas").attr("height",altoCanvasFinalImg2),$(".canvas-container").attr("height",altoCanvasFinalImg2),$(".upper-canvas").css("height",altoCanvasFinalImg2),$(".canvas-container").css("height",altoCanvasFinalImg2),canvas222.getContext("2d").restore(),canvas222.calcOffset(),canvas222.renderAll(),canvas222.forEachObject(function(a){a.hasBorders=a.hasControls=!1}),html="",html+='<div style="position:absolute;bottom:15px;right:20px;cursor:pointer" onclick="ampliar(2)" style="text-align: center; display: inline;"><img src="img/pasos/ampliar.png"  style="width:30px"alt="Ampliar imagen" title="Ampliar imagen"></div>',$("#ldlc-image222").append(html)}}})}catch(a){console.log("Se ha producido un error en la conexión con el servidor"),$(document.body).css({cursor:"default"})}}if(2==proyectoObject.ldlcs[1].Estado||4==proyectoObject.ldlcs[1].Estado){$("#imagen1").css("display","none");var n=proyectoObject.ldlcs[1].ListaCompra_id;try{$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getLdlc",id_ldlc:n},contentType:"application/json; charset=utf-8",success:function(a){if(console.log(a),isError(a)){$(document.body).css({cursor:"default"});var o=urlbase;window.location=o}else{$(document.body).css({cursor:"default"});var e=a,t=$(window).height(),s=($(window).width(),t-50);canvas111=new fabric.StaticCanvas("canvas111");var r=JSON.parse(e.Canvas);console.log(r.objects),json=JSON.stringify(r),anchoCanvasFinal=0,altoCanvasFinal=0;var n=0,c=0;for(minLeftFinal1=1e5,minTopFinal1=1e5,i=0;i<r.objects.length;i++){tope=r.objects[i].top,altura=r.objects[i].height,n=r.objects[i].left,c=r.objects[i].width,scala=r.objects[i].scaleX,scalaY=r.objects[i].scaleY;var l=altura*scalaY*.5,d=c*scala*.5,p=altura*scalaY*.75,m=c*scala*.75;minTop=tope,minLeft=n,r.objects[i].angle>=10&&r.objects[i].angle<=45?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=n+d):r.objects[i].angle>45&&r.objects[i].angle<=90?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=n,anchoCanvas-=50):r.objects[i].angle>90&&r.objects[i].angle<=130?(console.log(">90"),altoCanvasImg=tope+p,altoCanvasImg=altoCanvasImg,anchoCanvas=n-d,anchoCanvas+=75):r.objects[i].angle>130&&r.objects[i].angle<=160?(console.log(">130"),altoCanvasImg=tope+l,anchoCanvas=n-d,anchoCanvas+=50):r.objects[i].angle>160&&r.objects[i].angle<=180?(console.log(">160"),altoCanvasImg=tope+40,anchoCanvas=n-d,anchoCanvas+=70):r.objects[i].angle>180&&r.objects[i].angle<=210?(console.log(">180"),altoCanvasImg=tope,anchoCanvas=n,anchoCanvas+=20):r.objects[i].angle>210&&r.objects[i].angle<=240?(console.log(">210"),altoCanvasImg=tope-15,anchoCanvas=n+d):r.objects[i].angle>240&&r.objects[i].angle<=260?(console.log(">240"),altoCanvasImg=tope-15,anchoCanvas=n+m+40):r.objects[i].angle>260&&r.objects[i].angle<=305?(console.log(">260"),altoCanvasImg=tope+30,anchoCanvas=n+m+100):r.objects[i].angle>305&&r.objects[i].angle<=325?(console.log(">305"),altoCanvasImg=tope+l,anchoCanvas=n+m+130):r.objects[i].angle>325&&r.objects[i].angle<=350?(console.log(">325"),altoCanvasImg=tope+p,anchoCanvas=n+m+130):(altoCanvasImg=tope+altura*scalaY,anchoCanvas=n+c*scala),tope<9e4&&n<9e4&&r.objects[i].visible&&(minTop<minTopFinal1&&(minTopFinal1=minTop),minLeft<minLeftFinal1&&(minLeftFinal1=minLeft),anchoCanvas>anchoCanvasFinal&&(anchoCanvasFinal=anchoCanvas),altoCanvasImg>altoCanvasFinal&&(altoCanvasFinal=altoCanvasImg))}restar11=minTopFinal1-50,restar111=minLeftFinal1-50,restarR11=restar11,restarR111=restar111,s=s,restar11>0?altoCanvasFinal1=altoCanvasFinal+50:(altoCanvasFinal+=50,altoCanvasFinal1=altoCanvasFinal+50),restar111>0?anchoCanvasFinal1=anchoCanvasFinal:(anchoCanvasFinal+=50,anchoCanvasFinal1=anchoCanvasFinal),anchoPantalla=$("#anchoCanvas").width();var g=anchoPantalla/anchoCanvasFinal;for(altoCanvasFinalImg=altoCanvasFinal*g,i=0;i<r.objects.length;i++)topObj=r.objects[i].top,leftObj=r.objects[i].left,restar111,r.objects[i].left=leftObj-restar111,restar11>0?r.objects[i].top=topObj-restar11:r.objects[i].top=topObj+restar11+50;canvas111.renderAll(),json=JSON.stringify(r),null!=json&&canvas111.loadFromJSON(json,function(){zoomIt(canvas111,g),canvas111.renderAll()}),restar11=restar11*g-50,restar111=restar111*g-50,$("#canvas111").attr("width",anchoPantalla),restar111>0?$("#canvas111").css("width",anchoPantalla+restar111):$("#canvas111").css("width",anchoPantalla+restar111+50),restar11>0?$("#canvas111").attr("height",altoCanvasFinalImg-restar11):$("#canvas111").attr("height",altoCanvasFinalImg+restar11+50),$(".upper-canvas").attr("width",anchoPantalla),$(".canvas-container").attr("width",anchoPantalla),$(".upper-canvas").css("width",anchoPantalla),$(".canvas-container").css("width",anchoPantalla),$("#canvas111").css("height","auto"),$(".upper-canvas").attr("height",altoCanvasFinalImg),$(".canvas-container").attr("height",altoCanvasFinalImg),$(".upper-canvas").css("height",altoCanvasFinalImg),$(".canvas-container").css("height",altoCanvasFinalImg),canvas111.getContext("2d").restore(),canvas111.calcOffset(),canvas111.renderAll(),canvas111.forEachObject(function(a){a.hasBorders=a.hasControls=!1}),html="",html+='<div style="position:absolute;bottom:15px;right:20px;cursor:pointer" onclick="ampliar(1)" style="text-align: center; display: inline;"><img src="img/pasos/ampliar.png"  style="width:30px"alt="Ampliar imagen" title="Ampliar imagen"></div>',$("#ldlc-image111").append(html)}}})}catch(a){console.log("Se ha producido un error en la conexión con el servidor"),$(document.body).css({cursor:"default"})}}if(3==proyectoObject.ldlcs[1].Estado||5==proyectoObject.ldlcs[1].Estado){$("#imagen2").css("display","none");var c=proyectoObject.ldlcs[1].ListaCompra_id;try{$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getLdlc",id_ldlc:c},contentType:"application/json; charset=utf-8",success:function(a){if(console.log(a),isError(a)){$(document.body).css({cursor:"default"});var o=urlbase;window.location=o}else{$(document.body).css({cursor:"default"});var e=a,t=$(window).height()-50;canvas222=new fabric.StaticCanvas("canvas222");var s=JSON.parse(e.Canvas);json2=JSON.stringify(s),anchoCanvasFinal=0,altoCanvasFinal=0;var r=0,n=0;for(minLeftFinal=1e5,minTopFinal=1e5,i=0;i<s.objects.length;i++){tope=s.objects[i].top,altura=s.objects[i].height,r=s.objects[i].left,n=s.objects[i].width,scala=s.objects[i].scaleX,scalaY=s.objects[i].scaleY;var c=altura*scalaY*.5,l=n*scala*.5,d=altura*scalaY*.75,p=n*scala*.75;minTop=tope,minLeft=r,s.objects[i].angle>=10&&s.objects[i].angle<=45?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=r+l):s.objects[i].angle>45&&s.objects[i].angle<=90?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=r,anchoCanvas-=50):s.objects[i].angle>90&&s.objects[i].angle<=130?(console.log(">90"),altoCanvasImg=tope+d,altoCanvasImg=altoCanvasImg,anchoCanvas=r-l,anchoCanvas+=75):s.objects[i].angle>130&&s.objects[i].angle<=160?(console.log(">130"),altoCanvasImg=tope+c,anchoCanvas=r-l,anchoCanvas+=50):s.objects[i].angle>160&&s.objects[i].angle<=180?(console.log(">160"),altoCanvasImg=tope+40,anchoCanvas=r-l,anchoCanvas+=70):s.objects[i].angle>180&&s.objects[i].angle<=210?(console.log(">180"),altoCanvasImg=tope,anchoCanvas=r,anchoCanvas+=20):s.objects[i].angle>210&&s.objects[i].angle<=240?(console.log(">210"),altoCanvasImg=tope-15,anchoCanvas=r+l):s.objects[i].angle>240&&s.objects[i].angle<=260?(console.log(">240"),altoCanvasImg=tope-15,anchoCanvas=r+p+40):s.objects[i].angle>260&&s.objects[i].angle<=305?(console.log(">260"),altoCanvasImg=tope+30,anchoCanvas=r+p+100):s.objects[i].angle>305&&s.objects[i].angle<=325?(console.log(">305"),altoCanvasImg=tope+c,anchoCanvas=r+p+130):s.objects[i].angle>325&&s.objects[i].angle<=350?(console.log(">325"),altoCanvasImg=tope+d,anchoCanvas=r+p+130):(altoCanvasImg=tope+altura*scalaY,anchoCanvas=r+n*scala),tope<9e4&&r<9e4&&s.objects[i].visible&&(minTop<minTopFinal&&(minTopFinal=minTop),minLeft<minLeftFinal&&(minLeftFinal=minLeft),anchoCanvas>anchoCanvasFinal&&(anchoCanvasFinal=anchoCanvas),altoCanvasImg>altoCanvasFinal&&(altoCanvasFinal=altoCanvasImg))}restar22=minTopFinal-50,restar222=minLeftFinal-50,restarR22=restar22,restarR222=restar222,t=t,anchoCanvasFinal=anchoCanvasFinal,restar22>0?altoCanvasFinal2=altoCanvasFinal+50:(altoCanvasFinal+=50,altoCanvasFinal2=altoCanvasFinal+50),restar222>0?anchoCanvasFinal=anchoCanvasFinal:(anchoCanvasFinal+=50,anchoCanvasFinal=anchoCanvasFinal),anchoCanvasFinal2=anchoCanvasFinal,anchoPantalla=$("#anchoCanvas2").width();var m=anchoPantalla/anchoCanvasFinal;for(altoCanvasFinalImg2=altoCanvasFinal*m,i=0;i<s.objects.length;i++)topObj=s.objects[i].top,leftObj=s.objects[i].left,restar222,s.objects[i].left=leftObj-restar222,restar22>0?s.objects[i].top=topObj-restar22:s.objects[i].top=topObj+restar22+50;canvas222.renderAll(),json2=JSON.stringify(s),null!=json2&&canvas222.loadFromJSON(json2,function(){zoomIt(canvas222,m),canvas222.renderAll()}),restar22=restar22*m-50*m,restar222=restar222*m-50*m,$("#canvas222").attr("width",anchoPantalla),restar222>0?$("#canvas222").css("width",anchoPantalla+restar222):$("#canvas222").css("width",anchoPantalla+restar222+50*m),restar22>0?$("#canvas222").attr("height",altoCanvasFinalImg2-restar22):$("#canvas222").attr("height",altoCanvasFinalImg2+restar22+50*m),$(".upper-canvas").attr("width",anchoPantalla),$(".canvas-container").attr("width",anchoPantalla),$(".upper-canvas").css("width",anchoPantalla),$(".canvas-container").css("width",anchoPantalla),$("#canvas222").css("height","auto"),$(".upper-canvas").attr("height",altoCanvasFinalImg2),$(".canvas-container").attr("height",altoCanvasFinalImg2),$(".upper-canvas").css("height",altoCanvasFinalImg2),$(".canvas-container").css("height",altoCanvasFinalImg2),canvas222.getContext("2d").restore(),canvas222.calcOffset(),canvas222.renderAll(),canvas222.forEachObject(function(a){a.hasBorders=a.hasControls=!1}),html="",html+='<div style="position:absolute;bottom:15px;right:20px;cursor:pointer" onclick="ampliar(2)" style="text-align: center; display: inline;"><img src="img/pasos/ampliar.png"  style="width:30px"alt="Ampliar imagen" title="Ampliar imagen"></div>',$("#ldlc-image222").append(html)}}})}catch(a){console.log("Se ha producido un error en la conexión con el servidor"),$(document.body).css({cursor:"default"})}}}var l="";if(t[0].imagenes.length>=1&&0==t[1].imagenes.length&&($(".3DV11").css({display:"block"}),l+='<div style="background-color: white;display: block; margin: 0 auto;padding-bottom:4%;" class="col-xs-12 CS1">',l+='\t<h3 style="margin-top: 0%; margin-bottom: 1%">',l+='<span  class="texto_letra_Arial_paso1 letra-xs">',l+="\tCAJÓN DE SASTRE",l+="\t</span>",l+="</h3> ",l+='<div class="col-xs-12 col-md-8 col-md-offset-2 ">',l+='<form action="FileUploadHandler" id="mydropzonePropuesta1"',l+='\t\tclass="dropzone estilo_bordes_completos letrainputformularios CS2"',l+='\t\tmethod="post" enctype="multipart/form-data" style="border:1px solid black;">',l+='\t\t\t<div class="letrainputformularios" id="dropzonePreview"></div>',l+="</form>",l+="</div>",l+="</div>",$(".dropZoneF").html(l),a=!0),t.length>1&&"2"==proyectoObject.paso3Propuestas&&proyectoObject.estado>60){$(".aceptarPropuesta").css("display","none"),$(".aceptarPropuesta2").css("display","none"),$(".aceptarPropuesta3d1").css("display","inline"),l+='<div style="display: block; margin: 0 auto;" class="col-xs-12">',l+='<h2 style="margin-top: 5%; margin-bottom: 2%">',l+='\t<span  class="texto_letra_Arial_paso1 letra-s">',l+="\t\t3D",l+="\t</span>",l+="</h2>",l+="</div>";for(p=0;p<t[1].imagenes.length;p++)l+='<div style="display: block; margin: 0 auto;" class="col-xs-12">',l+='\t<h3 style="margin-top: 2%; margin-bottom: 2%">',l+='\t<span  class="texto_letra_Arial_paso1 letra-xs">',l+="\t\tVISTA "+(p+1),l+="\t</span>",l+="</h3> ",l+='<div class="col-xs-12 col-md-8 col-md-offset-2 3D3">',l+='<div style="width: 100%; text-align: center;"><img id="imgMoodboard" style="width: 100%; border: 1px 1px 1px 1px black; border: 1px; border-style: solid; padding: 10px;" alt="Propuesta Decoración" src="',l+=s+t[1].imagenes[p],l+='"/></div></div></div>';t[0].imagenes.length>=1&&(l+='<div style="display: block; margin: 0 auto;" class="col-xs-12 CS1">',l+='\t<h3 style="margin-top: 5%; margin-bottom: 1%">',l+='<span  class="texto_letra_Arial_paso1 letra-xs">',l+="\tCAJÓN DE SASTRE",l+="\t</span>",l+="</h3> ",l+='<div class="col-xs-12 col-md-8 col-md-offset-2 ">',l+='<form action="FileUploadHandler" id="mydropzonePropuesta1"',l+='\t\tclass="dropzone estilo_bordes_completos letrainputformularios CS2"',l+='\t\tmethod="post" enctype="multipart/form-data" style="border:1px solid black;">',l+='\t\t\t<div class="letrainputformularios" id="dropzonePreview"></div>',l+="</form>",l+="</div>",l+="</div>",a=!0),$(".3DV11").html(l)}else $(".3DV13").css({display:"none"}),$(".aceptarPropuesta3d1").css({display:"inline"}),$(".aceptarPropuesta3d1").html("PROPUESTA 2D NO ACEPTADA"),$(".aceptarPropuesta3d1").attr("onclick",""),proyectoObject.estado<=60&&$(".aceptarPropuesta3d1").css({display:"none"}),proyectoObject.estado>=80&&$(".aceptarPropuesta3d1").css({display:"none"});var d="";if(2==t.length&&"3"==proyectoObject.paso3Propuestas&&proyectoObject.estado>60){$(".aceptarPropuesta").css("display","none"),$(".aceptarPropuesta2").css("display","none"),$(".aceptarPropuesta3d2").css("display","inline"),d+='<div style="display: block; margin: 0 auto;" class="col-xs-12">',d+='<h2 style="margin-top: 5%; margin-bottom: 2%">',d+='\t<span  class="texto_letra_Arial_paso1 letra-s">',d+="\t\t3D",d+="\t</span>",d+="</h2>",d+="</div>";for(var p=0;p<t[1].imagenes.length;p++)d+='<div style="display: block; margin: 0 auto;" class="col-xs-12">',d+='\t<h3 style="margin-top: 2%; margin-bottom: 2%">',d+='\t<span  class="texto_letra_Arial_paso1 letra-xs">',d+="\t\tVISTA "+(p+1),d+="\t</span>",d+="</h3> ",d+='<div class="col-xs-12 col-md-8 col-md-offset-2 3D3">',d+='<div style="width: 100%; text-align: center;"><img id="imgMoodboard" style="width: 100%; border: 1px 1px 1px 1px black; border: 1px; border-style: solid; padding: 10px;" alt="Propuesta Decoración" src="',d+=s+t[1].imagenes[p],d+='"/></div></div></div>';t[0].imagenes.length>=1&&t[1].imagenes.length>=1&&(d+='<div style="display: block; margin: 0 auto;" class="col-xs-12 ">',d+='\t<h3 style="margin-top: 5%; margin-bottom: 1%">',d+='<span  class="texto_letra_Arial_paso1 letra-xs">',d+="\tCAJÓN DE SASTRE",d+="\t</span>",d+="</h3> ",d+='<div class="col-xs-12 col-md-8 col-md-offset-2 ">',d+='<form action="FileUploadHandler" id="mydropzonePropuesta1"',d+='\t\tclass="dropzone estilo_bordes_completos letrainputformularios CS2"',d+='\t\tmethod="post" enctype="multipart/form-data" style="border:1px solid black;">',d+='\t\t\t<div class="letrainputformularios" id="dropzonePreview"></div>',d+="</form>",d+="</div>",a=!0),$(".3DV12").html(d)}else $(".3DV1").css({display:"block"}),$(".3DV2").css({display:"none"}),$(".3DV3").css({display:"none"}),$(".aceptarPropuesta3d2").css({display:"inline"}),$(".aceptarPropuesta3d2").html("PROPUESTA 2D NO ACEPTADA"),proyectoObject.estado<=60&&$(".aceptarPropuesta3d2").css({display:"none"}),proyectoObject.estado>=80&&$(".aceptarPropuesta3d2").css({display:"none"});proyectoObject.estado>71&&($(".aceptarPropuesta").css("display","none"),$(".aceptarPropuesta2").css("display","none"),$(".aceptarPropuesta3d1").css("display","inline"),$(".aceptarPropuesta3d2").css("display","inline"),"3"==proyectoObject.paso3Propuestas?($(".aceptarPropuesta3d2").html("PROPUESTA ACEPTADA"),$(".aceptarPropuesta3d1").html("PROPUESTA NO ACEPTADA")):($(".aceptarPropuesta3d1").html("PROPUESTA ACEPTADA"),$(".aceptarPropuesta3d2").html("PROPUESTA NO ACEPTADA")),$(".aceptarPropuesta3d1").attr("onclick",""),$(".aceptarPropuesta3d2").attr("onclick",""))}console.log(proyectoObject),0==a?cargarDropzonePlanos(!0):cargarDropzonePlanos(!1)}function setTrabajos(){var a=getCookie("userAssistant"),o=proyectoObject.nombreProyecto;console.log(proyectoObject);var e=proyectoObject.planos,t=urlbaseForMoodboards+"/usuarios/"+a+"/"+o+"/planos/";if(proyectoObject.estado>80){for(var s="",r=0;r<e.length;r++){s+='<div style="display: block;background-color:transparent; margin: 0 auto;  padding-top: 25px; padding-bottom: 25px;" class="padding-formulario">';for(var n=0;n<e[r].imagenes.length;n++)0==e[r].imagenes.length||(s+='<div style="width: 100%; text-align: center;"><img id="imgMoodboard" style="max-width: 100%; border-style: solid; padding: 5px;" alt="Proyecto Decoración" src="',s+=t+e[r].imagenes[n],s+='"/> </div><br /><br />');var i=e[r].pdf,c=urlbaseForMoodboards+"/usuarios/"+a+"/"+o+"/planos/"+i;0==r&&(s+='<a target="_blank" href="'+c+'"\t id="download"><h1 class="letra-s" style="padding-top:1%;text-decoration:bold;color:black">DESCARGAR PDF <i class="glyphicon glyphicon-cloud-download"></i></h1></a>'),s+="</div>"}s+='<h2 class="titulo_pantalla col-xs-12" style="margin-top: 5%;">LISTA DE LA COMPRA</h2>',s+='<h2 class="col-xs-12" style="margin-top: 4%; margin-bottom: 2%"> <span  class="texto_letra_Arial_paso1 letra-ms">2D</span></h2>',s+='<div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2" id="anchoCanvas" style="background-color:white">',s+='\t<div id="items-container-borradores" class="items-container-borradores">',s+='<div id="available_images-borradores" class="" >',s+='\t<div class="resultset" >  ',s+='\t\t\t\t<div id="ldlc-image111" class=""> ',s+='\t\t\t\t<div class="image_wrapper">',s+='\t\t\t\t\t<div class="image_background "> ',s+='\t\t\t\t\t\t\t\t<canvas id="canvas111" class="lower-canvas " width="0" height="0" style="width:0; height:0;"></canvas>',s+="\t\t\t\t\t\t\t\t\t\t<script> ",s+="\t\t\t\t\t\t\t\t\t\t<\/script>",s+="\t\t\t\t\t\t</div>",s+="\t\t\t\t\t\t</div>",s+="\t\t\t\t\t</div> ",s+="\t\t</div>",s+="\t</div>",s+="</div>",s+='<div id="imagen1"><img src="img/pasos/canvas.jpg" alt="canvas" style="width:100%;"/></div> ',s+="</div>",s+="<br/><br/>",s+='<h2 class="col-xs-12" style="margin-top: 4%; margin-bottom: 2%"> <span  class="texto_letra_Arial_paso1 letra-ms">PRODUCTOS</span></h2>',s+='<div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-8  col-lg-offset-2 listaDeItems" style="margin-bottom:5%">',s+="</div>",s+='<h2 class="col-xs-12" style="margin-top: 2%; margin-bottom: 6%"> <span  class="texto_letra_Arial_paso1 letra-ms aStyle"><a style="cursor:pointer" onclick="resumenItems()"> VER TODOS LOS PRODUCTOS <i class="glyphicon glyphicon-th-list"></i></a></span></h2>',proyectoObject.estado>=100?s+='<div><br/><br/><br/><br/><button class="botonesloginreglost btn btn-primary btn-l btn-block letra-s aceptarPaso4" style="display: block;margin: 0 auto; max-width: 400px;" >PROYECTO FINALIZADO</button><br/><br/></div>':s+='<div><br/><br/><br/><br/><button class="botonesloginreglost btn btn-primary btn-l btn-block letra-s aceptarPaso4" style="display: block;margin: 0 auto; max-width: 450px;" onclick="aceptarPaso4()" >ACEPTAR Y FINALIZAR PROYECTO</button><br/><br/></div>'}else{s="";s+='<div style="height:100%;padding:2%;background-color:rgba(255,255,255,0.7)">',s+='<h4 class="subtitulo_pantalla" style="margin-top:2%;margin-bottom:2%;">',s+='\t<p class="letra-s">EL DECORADOR ESTÁ TRABAJANDO EN LOS PLANOS DE DISTRIBUCIÓN</p>',s+="</h4>",s+="</div>"}if($("#divForPropuestas").html(s),0==proyectoObject.ldlcs.length);else if(1==proyectoObject.ldlcs.length&&(4==proyectoObject.ldlcs[0].Estado||5==proyectoObject.ldlcs[0].Estado)){$("#imagen1").css("display","none");var l=proyectoObject.ldlcs[0].ListaCompra_id;try{$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getLdlc",id_ldlc:l},contentType:"application/json; charset=utf-8",success:function(a){if(console.log(a),isError(a)){$(document.body).css({cursor:"default"});var o=urlbase;window.location=o}else{$(document.body).css({cursor:"default"});var e=a,t=$(window).height(),s=($(window).width(),t-50);canvas111=new fabric.StaticCanvas("canvas111");var n=JSON.parse(e.Canvas);arrayItems=n.objects,console.log(n.objects),json=JSON.stringify(n),anchoCanvasFinal=0,altoCanvasFinal=0;var i=0,c=0;for(minLeftFinal1=1e5,minTopFinal1=1e5,r=0;r<n.objects.length;r++){tope=n.objects[r].top,altura=n.objects[r].height,i=n.objects[r].left,c=n.objects[r].width,scala=n.objects[r].scaleX,scalaY=n.objects[r].scaleY;var l=altura*scalaY*.5,d=c*scala*.5,p=altura*scalaY*.75,m=c*scala*.75;minTop=tope,minLeft=i,n.objects[r].angle>=10&&n.objects[r].angle<=45?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=i+d):n.objects[r].angle>45&&n.objects[r].angle<=90?(altoCanvasImg=tope+altura*scalaY,altoCanvasImg+=50,anchoCanvas=i,anchoCanvas-=50):n.objects[r].angle>90&&n.objects[r].angle<=130?(console.log(">90"),altoCanvasImg=tope+p,altoCanvasImg=altoCanvasImg,anchoCanvas=i-d,anchoCanvas+=75):n.objects[r].angle>130&&n.objects[r].angle<=160?(console.log(">130"),altoCanvasImg=tope+l,anchoCanvas=i-d,anchoCanvas+=50):n.objects[r].angle>160&&n.objects[r].angle<=180?(console.log(">160"),altoCanvasImg=tope+40,anchoCanvas=i-d,anchoCanvas+=70):n.objects[r].angle>180&&n.objects[r].angle<=210?(console.log(">180"),altoCanvasImg=tope,anchoCanvas=i,anchoCanvas+=20):n.objects[r].angle>210&&n.objects[r].angle<=240?(console.log(">210"),altoCanvasImg=tope-15,anchoCanvas=i+d):n.objects[r].angle>240&&n.objects[r].angle<=260?(console.log(">240"),altoCanvasImg=tope-15,anchoCanvas=i+m+40):n.objects[r].angle>260&&n.objects[r].angle<=305?(console.log(">260"),altoCanvasImg=tope+30,anchoCanvas=i+m+100):n.objects[r].angle>305&&n.objects[r].angle<=325?(console.log(">305"),altoCanvasImg=tope+l,anchoCanvas=i+m+130):n.objects[r].angle>325&&n.objects[r].angle<=350?(console.log(">325"),altoCanvasImg=tope+p,anchoCanvas=i+m+130):(altoCanvasImg=tope+altura*scalaY,anchoCanvas=i+c*scala),tope<9e4&&i<9e4&&n.objects[r].visible&&(minTop<minTopFinal1&&(minTopFinal1=minTop),minLeft<minLeftFinal1&&(minLeftFinal1=minLeft),anchoCanvas>anchoCanvasFinal&&(anchoCanvasFinal=anchoCanvas),altoCanvasImg>altoCanvasFinal&&(altoCanvasFinal=altoCanvasImg))}restar11=minTopFinal1-50,restar111=minLeftFinal1-50,restarR11=restar11,restarR111=restar111,s=s,restar11>0?altoCanvasFinal1=altoCanvasFinal+50:(altoCanvasFinal+=50,altoCanvasFinal1=altoCanvasFinal+50),restar111>0?anchoCanvasFinal1=anchoCanvasFinal:(anchoCanvasFinal+=50,anchoCanvasFinal1=anchoCanvasFinal),anchoPantalla=$("#anchoCanvas").width();var g=anchoPantalla/anchoCanvasFinal;for(altoCanvasFinalImg=altoCanvasFinal*g,r=0;r<n.objects.length;r++)topObj=n.objects[r].top,leftObj=n.objects[r].left,restar111,n.objects[r].left=leftObj-restar111,restar11>0?n.objects[r].top=topObj-restar11:n.objects[r].top=topObj+restar11+50;canvas111.renderAll(),json=JSON.stringify(n),null!=json&&canvas111.loadFromJSON(json,function(){zoomIt(canvas111,g),canvas111.renderAll()}),restar11=restar11*g-50,restar111=restar111*g-50,$("#canvas111").attr("width",anchoPantalla),restar111>0?$("#canvas111").css("width",anchoPantalla+restar111):$("#canvas111").css("width",anchoPantalla+restar111+50),restar11>0?$("#canvas111").attr("height",altoCanvasFinalImg-restar11):$("#canvas111").attr("height",altoCanvasFinalImg+restar11+50),$(".upper-canvas").attr("width",anchoPantalla),$(".canvas-container").attr("width",anchoPantalla),$(".upper-canvas").css("width",anchoPantalla),$(".canvas-container").css("width",anchoPantalla),$("#canvas111").css("height","auto"),$(".upper-canvas").attr("height",altoCanvasFinalImg),$(".canvas-container").attr("height",altoCanvasFinalImg),$(".upper-canvas").css("height",altoCanvasFinalImg),$(".canvas-container").css("height",altoCanvasFinalImg),canvas111.getContext("2d").restore(),canvas111.calcOffset(),canvas111.renderAll(),canvas111.forEachObject(function(a){a.hasBorders=a.hasControls=!1}),html="",html+='<div style="position:absolute;bottom:15px;right:20px;cursor:pointer" onclick="ampliar(1)" style="text-align: center; display: inline;"><img src="img/pasos/ampliar.png"  style="width:30px"alt="Ampliar imagen" title="Ampliar imagen"></div>',$("#ldlc-image111").append(html),arrayItems=arrayItems.reduce(function(a,o){return a[o.id]=a[o.id]||[],a[o.id].push(o),a},{}),listaDeItems="";var u=0;$.each(arrayItems,function(a,o){style="",u++;var e=new Image;e.src=o[0].src,e.width>e.height?style="height:100%;width:auto;":style="width:100%;height:auto;",o[0].price>0&&(listaDeItems+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ><div class="cuadros"><div class="imagenItems"><img style="'+style+'" src="'+o[0].src+'" alt="item'+o.length+'"/> </div><div class="letra-xs letra-mayusculas nombreItem" style="margin-bottom:5%;width:90%;margin-left:5%;border-bottom:1px solid #ccc">'+o[0].title+'</div><a class="buttonstandard_invertido letra-xs" style="width:70%;margin-bottom:5%;padding:0;letter-spacing:1px" target="_blank" href="'+o[0].url+'">VER +</a></div></div>')}),$(".listaDeItems").html(listaDeItems)}}})}catch(a){console.log("Se ha producido un error en la conexión con el servidor"),$(document.body).css({cursor:"default"})}}}function resumenItems(){$("#resumenItems").modal("show");var a="";a+='<div class="col-xs-12" style="padding-left:0">',a+='<div class="col-xs-6 col-sm-8" style="text-align:left;padding-left:5%">',a+='\t<p class="letra-xs">PRODUCTOS</p>',a+="</div>",a+='<div class="col-xs-6 col-sm-4">',a+='\t<p class="letra-xs cantidadPrecio" style="text-align:center">CANTIDAD Y PRECIO</p>',a+="</div>",a+='<hr width="100%"/>';var o=0,e=0;$.each(arrayItems,function(t,s){style="",e++;var r=new Image;r.src=s[0].src,r.width>r.height?style="height:100%;width:auto;":style="width:100%;height:auto;",tiendaEnlace=s[0].url,array=["http://","https://","http://www.","https://www.","www."],array2=[".com",".net",".info",".es",".org",".biz"],protocolos=new RegExp(array.join("|"),"g"),terminaciones=new RegExp(array2.join("|"),"g"),url=tiendaEnlace.replace(protocolos,""),url=url.replace(terminaciones,"FIN"),url=url.split("FIN"),total2=0,total=0,b=0;for(var n=0;n<s.length;n++)total2=s[n].price,0!=total2&&b++;total=s[0].price*b,total=total.toFixed(2),o=parseFloat(o)+parseFloat(total),o=o.toFixed(2),total>0&&(a+='<div class="col-xs-12 col-sm-8" style="margin-bottom:2%">',a+='\t<div class="col-xs-4 col-sm-4 imagenPopUp">',a+='\t\t<img style="width:95%;margin:2%;margin-left:0;margin-right:5%" src="'+s[0].src+'" alt="item'+s.length+'"/> ',a+="\t</div>",a+='\t<div class="col-xs-8 col-sm-8">',a+='\t\t<input  style="width:100%;margin-left:0;" readonly class="input-p letra-xs puntos" type="text" name="fname2" value="'+s[0].title+'"/>',a+='\t\t<input  style="width:100%;margin-left:0;" readonly class="input-p letra-xs puntos" type="text" name="fname2" value="'+url[0]+'"/>',a+='\t\t<input  style="width:100%;margin-left:0;" readonly class="input-p letra-xs puntos" type="text" name="fname2" value="'+s[0].price+'€"/>',a+="\t</div>",a+="</div>",a+='<div class="col-xs-3 col-xs-offset-0 col-sm-offset-0 col-sm-2">',a+='\t\t<input  style="width:100%;margin-bottom:6%" readonly class="input-p  letra-xs text-center desplazar" type="text" name="fname2" value="'+s.length+'"/>',a+="</div>",a+='<div class="col-xs-8 col-sm-2">',a+='\t\t<div class="col-xs-11 col-xs-offset-0 col-sm-offset-0 col-sm-12" style="padding:0"><input readonly class="input-p  letra-xs text-center desplazar2" type="text" name="fname2" value="'+total+'€"/></div>',a+="</div>",a+='<div class="col-xs-12 col-sm-4">',a+='\t\t<a class="col-xs-12 col-xs-offset-0 col-sm-12 buttonstandard_invertido botonComprar2 " style="widht:auto;" target="_blank" href="'+tiendaEnlace+'">comprar</a>',a+="</div>")}),a+='<hr width="100%" style="margin-bottom: 0;"/>',a+='<div class="col-xs-6 col-sm-10" style="text-align:left;padding-left:5%">',a+='\t<p class="letra-xs">TOTAL</p>',a+="</div>",a+='<div class="col-xs-6 col-sm-2">',a+='\t<p class="letra-xs" style="text-align:center">'+o+"€</p>",a+="</div>",a+="</div>",$("#itemsLista").html(a)}function setEstiloPre(){var a=getCookie("paso1"),o=document.getElementById("imagen_clasico"),e=document.getElementById("imagen_inbetween"),t=document.getElementById("imagen_modern");"salon"==a&&(o.src="img/categorias/salon/estilo-clasico.png",e.src="img/categorias/salon/estilo-nordico.png",t.src="img/categorias/salon/estilo-moderno.png"),"comedor"==a&&(o.src="img/categorias/comedor/estilo-clasico.png",e.src="img/categorias/comedor/estilo-nordico.png",t.src="img/categorias/comedor/estilo-moderno.png"),"dormitorio"==a&&(o.src="img/categorias/dormitorio/estilo-clasico.png",e.src="img/categorias/dormitorio/estilo-nordico.png",t.src="img/categorias/dormitorio/estilo-moderno.png"),"dormitorio-infantil"==a&&(o.src="img/categorias/dormitorio-infantil/estilo-clasico.png",e.src="img/categorias/dormitorio-infantil/estilo-nordico.png",t.src="img/categorias/dormitorio-infantil/estilo-moderno.png"),"escritorio"==a&&(o.src="img/categorias/escritorio/estilo-clasico.png",e.src="img/categorias/escritorio/estilo-nordico.png",t.src="img/categorias/escritorio/estilo-moderno.png"),"recibidor"==a&&(o.src="img/categorias/recibidor/estilo-clasico.png",e.src="img/categorias/recibidor/estilo-nordico.png",t.src="img/categorias/recibidor/estilo-moderno.png")}function setminimalismoPre(){var a=getCookie("paso1"),o=document.getElementById("imagen_menos_es_mas"),e=document.getElementById("imagen_ni_mucho_ni_poco"),t=document.getElementById("imagen_mas_es_mas");"salon"==a&&(o.src="img/categorias/salon/minimalismo-menosesmas.png",e.src="img/categorias/salon/minimalismo-nimuchonipoco.png",t.src="img/categorias/salon/minimalismo-masesmas.png"),"comedor"==a&&(o.src="img/categorias/comedor/minimalismo-menosesmas.png",e.src="img/categorias/comedor/minimalismo-nimuchonipoco.png",t.src="img/categorias/comedor/minimalismo-masesmas.png"),"dormitorio"==a&&(o.src="img/categorias/dormitorio/minimalismo-menosesmas.png",e.src="img/categorias/dormitorio/minimalismo-nimuchonipoco.png",t.src="img/categorias/dormitorio/minimalismo-masesmas.png"),"dormitorio-infantil"==a&&(o.src="img/categorias/dormitorio-infantil/minimalismo-menosesmas.png",e.src="img/categorias/dormitorio-infantil/minimalismo-nimuchonipoco.png",t.src="img/categorias/dormitorio-infantil/minimalismo-masesmas.png"),"escritorio"==a&&(o.src="img/categorias/escritorio/minimalismo-menosesmas.png",e.src="img/categorias/escritorio/minimalismo-nimuchonipoco.png",t.src="img/categorias/escritorio/minimalismo-masesmas.png"),"recibidor"==a&&(o.src="img/categorias/recibidor/minimalismo-menosesmas.png",e.src="img/categorias/recibidor/minimalismo-nimuchonipoco.png",t.src="img/categorias/recibidor/minimalismo-masesmas.png")}function setcolorPre(){var a=getCookie("paso1"),o=document.getElementById("imagen_neutro"),e=document.getElementById("imagen_algo_de_color"),t=document.getElementById("imagen_con_contraste");"salon"==a&&(o.src="img/categorias/salon/color-neutro.png",e.src="img/categorias/salon/color-pincelada.png",t.src="img/categorias/salon/color-atope.png"),"comedor"==a&&(o.src="img/categorias/comedor/color-neutro.png",e.src="img/categorias/comedor/color-pincelada.png",t.src="img/categorias/comedor/color-atope.png"),"dormitorio"==a&&(o.src="img/categorias/dormitorio/color-neutro.png",e.src="img/categorias/dormitorio/color-pincelada.png",t.src="img/categorias/dormitorio/color-atope.png"),"dormitorio-infantil"==a&&(o.src="img/categorias/dormitorio-infantil/color-neutro.png",e.src="img/categorias/dormitorio-infantil/color-pincelada.png",t.src="img/categorias/dormitorio-infantil/color-atope.png"),"escritorio"==a&&(o.src="img/categorias/escritorio/color-neutro.png",e.src="img/categorias/escritorio/color-pincelada.png",t.src="img/categorias/escritorio/color-atope.png"),"recibidor"==a&&(o.src="img/categorias/recibidor/color-neutro.png",e.src="img/categorias/recibidor/color-pincelada.png",t.src="img/categorias/recibidor/color-atope.png")}function alahomefunction(){var a=urlbase;window.location=a}function insertarparaPerfiles(a){}function portfolios(a){try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/GetPerfiles",data:{carpeta:"perfiles",subcarpeta:a},contentType:"application/json; charset=utf-8",success:function(o){var e="";if(o.perfil.length>0){for(var t=o.perfil,s=0;s<t.length;s++){var r="",n="",i="";"Coralia"==a?("1"==t[s].subcarpeta&&(r="dormitorio colonial\t",n="azul, madera, chic",i="Porque el colonial también puede tener un toque chic. Para ello podemos jugar con los complementos DECO y un papel pintado de estilo vintage "),"2"==t[s].subcarpeta&&(r="Salón industrial",n="metal, gris, funcional",i="El estilo industrial también admite una pincelada de color. El amarillo combina perfecto con los tonos grises y los muebles metálicos restándoles frialdad"),"3"==t[s].subcarpeta&&(r="Recibidor natural",n="madera, naturaleza, green",i="La entrada puede ser un espacio más informal y sencillo que amueblemos con varios elementos versátiles, como troncos, bancos, sillas…"),"4"==t[s].subcarpeta&&(r="Salón moderno",n="moderno, sencillo, confortable, masculino",i="La idea era crear una zona de estar confortable, con una decoración sencilla, en líneas rectas, pero a la vez acogedora. Los colores predominantes debían ser los grises, y beiges con un toque importante de azulón."),"5"==t[s].subcarpeta&&(r="Habitación de bebé",n="infantil, mint, nórdico, luminoso",i="Un espacio para un bebé con base de tonos neutros y toques de mint para darle vida al conjunto. DECO nórdica sencilla y acogedora"),"6"==t[s].subcarpeta&&(r="Dormitorio industrial",n="madera, gris, calidez, espacio",i="El detalle de los pájaros crea la ilusión de encontrarnos en un dormitorio con más aire y una mayor sensación de espacio"),"7"==t[s].subcarpeta&&(r="Comedor rústico",n="madera, vintage, acogedor",i="un comedor con aire vintage, muy acogedor, para el uso diario y con un extra de encanto gracias a la alacena"),"8"==t[s].subcarpeta&&(r="Espacio de trabajo",n="industrial, nórdico, sencillo",i="Piezas insdustriales mezcladas con otras en madera y con complementos de aire atemporal. Un espacio de trabajo que bien podría estar integrado en una habitación, un salón…"),"9"==t[s].subcarpeta&&(r="Salón acogedor",n="femenino, cálido, shabby, chic",i="Un salón con aire femenino, piezas con historia, colores neutros y toques de lila que favorecen la sensación de atmósfera delicada"),"10"==t[s].subcarpeta&&(r="Espacio sofisticado",n="atemporal, con personalidad, aire retro",i="Para crear una buena galería en las paredes, lo mejor es ir poniendo cuadros, láminas y objetos especiales y de diferentes formas, materiales y acabados"),"11"==t[s].subcarpeta&&(r="comedor en cocina",n="moderna, acogedora, blanco y negro",i="Los platos y el MIX en las paredes es tendencia. Nada mejor que decorar el rincón de la zona de comer con esta idea"),"12"==t[s].subcarpeta&&(r="Dormitorio romántico",n="rosa, azul, forja, acogedor",i="A veces, uno de los muebles -como puede ser esta gran cama de forja- se convierte en la protagonista de un dormitorio. Más si queremos potenciar el aire femenino del cuarto")):("1"==t[s].subcarpeta&&(r="Dormitorio juvenil nórdico",n="nórdico\tiluminación, natural,elegante",i="Si queréis conseguir un dormitorio infantil unisex que pueda servir tanto para niños como para niñas con una decoración sencilla, en líneas rectas, pero a la vez acogedora. Los colores predominantes son los grises, las pinceladas de color vivas como el amarillo crean dinámicos contrastes perfectos para estos espacios infantiles"),"2"==t[s].subcarpeta&&(r="Salón nórdico",n="azul, madera, moderno",i="Este salón de estilo nórdico, con luz natural matizada por una iluminación cálida. Tonos claros y mobiliario con materiales nobles"),"3"==t[s].subcarpeta&&(r="Ambientes minimalista",n="blanco, negro, metal",i="Espacio minimalista donde priman los colores blanco y negro y el uso de tonalidades metálicas"),"4"==t[s].subcarpeta&&(r="Escritorio retro",n="madera,decorativo,funcional",i="Es la alternativa al estilo vintage, para los amantes de décadas pasadas que no encuentran un estilo actual que se ajuste a sus gustos"),"5"==t[s].subcarpeta&&(r="Comedor moderno",n="abierto,simplicidad y elegancia",i="En este caso nos encontramos con un comedor abierto, los colores principales en este estilo son los neutrales, negro y blanco con un tono fuerte y brillante.  algo que le da un toque sofisticado y elegante"),"6"==t[s].subcarpeta&&(r="Recibidor natural",n="femenino,papel pintado, colores pastel",i="Este espacio luminoso y confortable reúne todos los sentidos soñados y aventureros, formas geométricas y mucha vegetación"),"7"==t[s].subcarpeta&&(r="Recibidor Contemporáneo",n="mobiliario moderno, cómodo, atractivo",i="Creamos un ambiente relajado con iluminación indirecta, capaz de aplicarse tanto en oficinas y comercios, como a loft y hogares"),"8"==t[s].subcarpeta&&(r="Dormitorio actual",n="luminoso,tonos claros",i="Este dormitorio actual, que resalta por su sencillez. La decoración de estilo escandinavo, con detalles que aportan vida y calidez a cada estancia"),"9"==t[s].subcarpeta&&(r="Salón industrial",n="industrial,chic, metal",i="Espacio inspirador donde la madera y las fibras naturales pondrán el acento cálido a los ambientes"),"10"==t[s].subcarpeta&&(r="Dormitorio clásico",n="colores naturales, luz, armonía",i="La gama de los tonos tostados es una apuesta segura para crear ambientes ... introducir muebles de madera que aportan aún más calidez al dormitorio")),e+=0==s?'<div class="text-center item  active">':'<div class="text-center item">',e=(e=(e=(e=(e+='<div style="margin-right: 0px; margin-left: 0px;" id="cabeceraPerfiles" class="row cabeceraPerfiles"><div style="text-align:left; margin-right: 0px; margin-left: 0px; padding-right: 0px; padding-left: 0px;"')+'class="row col-md-6 col-sm-6 col-xs-12"><div\tstyle="border-bottom: black; border-bottom-style: solid; border-bottom-width: 1px;"\tclass="col-md-12 col-sm-12 col-xs-12"> \t<h4>TIPO:'+r+"</h4>")+'</div><hr><div class="col-md-12 col-sm-12 col-xs-12"><h5>PALABRAS CLAVE:'+n+'</h5></div></div><div class="col-md-6 col-sm-6 col-xs-12" style="border: black; border-style: solid; border-width: 1px;"><div style="width: 96%; background-color: white; margin-right: 2%; margin-left: 2%; margin-top: -5px; height: 5px"></div>\t<h6 style="text-align: center; line-height: 1.6;">'+i+"</h6>")+'<div\tstyle="width: 96%; background-color: white; margin-right: 2%; margin-left: 2%; margin-bottom: -5px; height: 5px"></div>\t</div></div><br><div id="cuerpoPerfiles" class="row">\t<div class="col-md-6 col-sm-6 col-xs-12">\t<img width="100%" alt="moodboard" src="perfiles/'+t[s].perfil+"/"+t[s].subcarpeta+"/"+t[s].fileJpg+'">')+'</div><div class="col-md-6 col-sm-6 col-xs-12"><img width="100%" alt="composicion"  src="perfiles/'+t[s].perfil+"/"+t[s].subcarpeta+"/"+t[s].filePng+'"></div></div><hr></div>'}$("#carouselinner").html(e),$("#modalforperfiles").modal("show"),setTimeout(function(){carouselNormalization()},500)}}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}}function carouselNormalization(){function a(){e.each(function(){t.push($(this).height())}),o=Math.max.apply(null,t),e.each(function(){$(this).css("height",o+"px")}),0==o&&setTimeout(function(){a()},200)}var o,e=$("#carouselinnerForImages2 .item "),t=[];e.length&&(a(),$(window).on("resize orientationchange",function(){o=0,t.length=0,e.each(function(){$(this).css("min-height","0")}),a()}))}function irablogfunction(){window.location.href="http://decotheco.com/blog/"}function iratiendafunction(){BootstrapDialog.alert("Estamos últimando detalles, pronto tendrás noticias de la tienda :)")}function seleccionarDecoradorHome(a,o,e){var t=getCookie("userAssistant"),s=getCookie("passAssistant");$("#modalforchoosedecorator").modal("hide");try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"getState",id_proyecto:o},contentType:"application/json; charset=utf-8",success:function(a){isError(a)?BootstrapDialog.alert(a):estado=a}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor")}try{$.ajaxSetup({scriptCharset:"utf-8",contentType:"application/json; charset=utf-8"}),$.ajax({dataType:"json",url:urlbaseForAjax+"/DecoradoresController",data:{token:"token",action:"decoradores_asociar_proyecto",id_decorador:a,id_proyecto:o,pass:s,mail:t},contentType:"application/json; charset=utf-8",success:function(t){if(isError(t))BootstrapDialog.alert(t);else{var s="";if(0==e)s+='<div class="buttonstandard letra-xs" style="width:90%;margin-left:5%;margin-bottom:3%;border:1px solid grey;" id="decorador'+o+'"> <div class="tresPuntos" title="'+t+'">'+t+"</div></div>";else{var r="";r+='<a class=" colornegro letraAriallogin  interspaciado_2 comprarPasosDecorador'+o+'"><div onclick="cargarProjecto('+o+',true)" style="width:90%;margin-left:5%;" class="buttonstandard_invertido letra-xs comprarPasos">ENTRAR AL PROYECTO</div></a>',$(".comprarPasosDecorador"+o).html(r),s+='<a href="decorador-online.html?decorador='+t+"&id="+a+'">',s+='<div class="buttonstandard letra-xs" style="width:90%;margin-left:5%;border:1px solid grey;" id="decorador"><div class="tresPuntos" title="'+t+'">'+t+"</div></div></a>";$(".estado"+o).val();3==e&&cargarProjecto(o,!0),$(".estado"+o).val(estado.texto_usuarios+" ( ESTÁS EN ESTE PASO DESDE HOY )")}$("#contratarDecorador"+o).html(s)}},error:function(a,o,e){$("#modalforchoosedecorator").modal("hide")}})}catch(a){BootstrapDialog.alert("Se ha producido un error en la conexión con el servidor"),$("#modalforchoosedecorator").modal("hide")}}function hover(a){"img/other/CUTOM-MOODBOARD-.gif"!=a.getAttribute("src")&&a.setAttribute("src","img/other/CUTOM-MOODBOARD-.gif")}function lanzarPopUpImagenesPasos(a,o){var e="";e+='<div id="carouselinnerForImages3" class=" conefectos carousel-inner" role="listbox">';var t=$(window).height();alto=t-200+"px",alto2=t-230+"px";for(var s="",r="",n=0;n<proyectoObject.preferencias.length;n++)""==proyectoObject.preferencias[n].id_moodboard&&0==proyectoObject.preferencias[n].id_moodboard||(r="existe");var i="";items=0;for(var c=0;c<proyectoObject.preferencias.length;c++){var l=proyectoObject.preferencias[c].id_moodboard;"existe"==r?""==l||0==l?s="noColocar":(s="colocar",i++):""!=l&&0!=l||(tipoHabi=proyectoObject.preferencias[c].habitacion,"dormitorio-infantil"==s&&(s="infantil"),"escritorio"==s&&(s="despacho"),"recibidor"==s&&(s="entrada")),0==c||1==i?"noColocar"!=s&&(""==l||0==l?(items++,e+='<div class="conefectossuaves text-center item active" style="text-align:center"><img id="imgMoodboard" align="center" src="'+urlbase+"/img/"+s+'.png";" style="display:inline;border:1px solid grey;height:'+alto+'" alt="'+s+'"/></div>'):(items++,e+='<div class="conefectossuaves text-center item active" style="text-align:center"><img id="imgMoodboard" align="center" src="'+urlbaseForMoodboards+"/moodboards/"+l+'.png" style="display:inline;border:1px solid grey;height:'+alto2+'" alt="Moodboard"/>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px;z-index:1500">',e+='\t<a  onclick="compartirFacebookv('+l+');" style="cursor: pointer; margin-left: 4px;margin-right: 4px;"\ttarget="_blank"> ',e+='\t\t<i class="fa  facebook-icon fa-facebook"> </i>',e+="\t</a> ",e+='\t<a onclick="compartirTwitterV('+l+');" style="cursor: pointer; margin-left: 4px;margin-right: 4px;" target="_blank"> ',e+='\t\t<i\tclass="fa fa-twitter facebook-icon"> </i>',e+="\t</a>",e+='\t<a onclick="compartirpinterestV('+l+');" style="cursor: pointer; margin-left: 4px;margin-right: 4px;" target="_blank"> ',e+='\t\t<i\tclass="fa fa-pinterest facebook-icon"> </i>',e+=" \t</a> ",e+="</div></div>")):"noColocar"!=s&&(""==l||0==l?(items++,e+='<div class="conefectossuaves text-center item" style="text-align:center"><img id="imgMoodboard" align="center" src="'+urlbase+"/img/"+s+'.png";" style="display:inline;border:1px solid grey;height:'+alto+'" alt="'+s+'"/></div>'):(items++,e+='<div class="conefectossuaves text-center item" style="text-align:center"><img id="imgMoodboard" align="center"  src="'+urlbaseForMoodboards+"/moodboards/"+l+'.png" style="display:inline;border:1px solid grey;height:'+alto2+'" alt="Moodboard"/>',e+='<div id="divparacompartircanvas" class="divforcompartirfacetwitfooter" style="margin-bottom:2%;margin-top:10px;z-index:1500">',e+='\t<a  onclick="compartirFacebookv('+l+');" style="cursor: pointer; margin-left: 4px;margin-right: 4px;"\ttarget="_blank"> ',e+='\t\t<i class="fa  facebook-icon fa-facebook"> </i>',e+="\t</a> ",e+='\t<a onclick="compartirTwitterV('+l+');" style="cursor: pointer; margin-left: 4px;margin-right: 4px;" target="_blank"> ',e+='\t\t<i\tclass="fa fa-twitter facebook-icon"> </i>',e+="\t</a>",e+='\t<a onclick="compartirpinterestV('+l+');" style="cursor: pointer; margin-left: 4px;margin-right: 4px;" target="_blank"> ',e+='\t\t<i\tclass="fa fa-pinterest facebook-icon"> </i>',e+=" \t</a> ",e+="</div></div>"))}items>1&&(e+="</div>",e+='<a class=" conefectossuaves carousel-control left" style="width: 2%; text-shadow: none; background-image: none;  color:black;   -webkit-text-stroke: 3px white;left:-5px"  href="#myCarousel21" data-slide="prev">',e+='    <span class=" conefectossuaves glyphicon glyphicon-chevron-left"></span>',e+=" </a>",e+=' <a class=" conefectossuaves carousel-control right" style="width: 2%; text-shadow: none; background-image: none; color:black;  -webkit-text-stroke: 3px white;right:-5px"   href="#myCarousel21" data-slide="next">',e+='      <span class=" conefectossuaves glyphicon glyphicon-chevron-right"></span>',e+="  </a>"),$("#myCarousel21").html(e),$("#modalforperfiles").modal("show"),$("#carouselinnerForImages3").css("height",alto)}var urlnombreproyecto="OnlineAssistance",pagorealizadoporprimeravezvar=getCookie("pagorealizadoporprimeravez"),id_decorador_seleccionado=null,pageIndex=1,id_userglobal=-1,nombreproyectoCTM,ctxForCTM,canvasctm,ratioforcanvasCTM,anteriorclickado=!1,informacion_proyecto,idmoodboard=0,checklogintosave=0,proyectos_ajax,proyectoObject,preferenciaObject,PIXEL_RATIO=function(){var a=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)}();createHiDPICanvas=function(a,o,e){e||(e=PIXEL_RATIO),ratioforcanvasCTM=e;var t=document.createElement("canvas");return t.width=a*e,t.height=o*e,t.style.maxWidth=a+"px",t.style.maxHeight=o+"px",t.style.width="100%",t.style.height="100%",t.getContext("2d").setTransform(e,0,0,e,0,0),t};var getTextHeight=function(a){var o=$("<span>Hg</span>").css({fontFamily:a}),e=$('<div style="display: inline-block; width: 1px; height: 0px;"></div>'),t=$("<div></div>");t.append(o,e),$("body").append(t);try{var s={};e.css({verticalAlign:"baseline"}),s.ascent=e.offset().top-o.offset().top,e.css({verticalAlign:"bottom"}),s.height=e.offset().top-o.offset().top,s.descent=s.height-s.ascent}finally{t.remove()}return s},QueryString=function(){for(var a={},o=window.location.search.substring(1).split("&"),e=0;e<o.length;e++){var t=o[e].split("=");if(void 0===a[t[0]])a[t[0]]=decodeURIComponent(t[1]);else if("string"==typeof a[t[0]]){var s=[a[t[0]],decodeURIComponent(t[1])];a[t[0]]=s}else a[t[0]].push(decodeURIComponent(t[1]))}return a}(),cronometro,arrayItems="";